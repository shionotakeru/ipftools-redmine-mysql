<?xml version="1.0" encoding="UTF-8"?>
<transformation>
  <info>
    <name>R_S04_M_MART_output</name>
    <description/>
    <extended_description/>
    <trans_version/>
    <trans_type>Normal</trans_type>
    <trans_status>0</trans_status>
    <directory>&#47;</directory>
    <parameters>
    </parameters>
    <log>
<trans-log-table><connection/>
<schema/>
<table/>
<size_limit_lines/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STATUS</id><enabled>Y</enabled><name>STATUS</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name><subject/></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name><subject/></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name><subject/></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name><subject/></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name><subject/></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name><subject/></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>STARTDATE</id><enabled>Y</enabled><name>STARTDATE</name></field><field><id>ENDDATE</id><enabled>Y</enabled><name>ENDDATE</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>DEPDATE</id><enabled>Y</enabled><name>DEPDATE</name></field><field><id>REPLAYDATE</id><enabled>Y</enabled><name>REPLAYDATE</name></field><field><id>LOG_FIELD</id><enabled>Y</enabled><name>LOG_FIELD</name></field></trans-log-table>
<perf-log-table><connection/>
<schema/>
<table/>
<interval/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>SEQ_NR</id><enabled>Y</enabled><name>SEQ_NR</name></field><field><id>LOGDATE</id><enabled>Y</enabled><name>LOGDATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>INPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>INPUT_BUFFER_ROWS</name></field><field><id>OUTPUT_BUFFER_ROWS</id><enabled>Y</enabled><name>OUTPUT_BUFFER_ROWS</name></field></perf-log-table>
<channel-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>LOGGING_OBJECT_TYPE</id><enabled>Y</enabled><name>LOGGING_OBJECT_TYPE</name></field><field><id>OBJECT_NAME</id><enabled>Y</enabled><name>OBJECT_NAME</name></field><field><id>OBJECT_COPY</id><enabled>Y</enabled><name>OBJECT_COPY</name></field><field><id>REPOSITORY_DIRECTORY</id><enabled>Y</enabled><name>REPOSITORY_DIRECTORY</name></field><field><id>FILENAME</id><enabled>Y</enabled><name>FILENAME</name></field><field><id>OBJECT_ID</id><enabled>Y</enabled><name>OBJECT_ID</name></field><field><id>OBJECT_REVISION</id><enabled>Y</enabled><name>OBJECT_REVISION</name></field><field><id>PARENT_CHANNEL_ID</id><enabled>Y</enabled><name>PARENT_CHANNEL_ID</name></field><field><id>ROOT_CHANNEL_ID</id><enabled>Y</enabled><name>ROOT_CHANNEL_ID</name></field></channel-log-table>
<step-log-table><connection/>
<schema/>
<table/>
<timeout_days/>
<field><id>ID_BATCH</id><enabled>Y</enabled><name>ID_BATCH</name></field><field><id>CHANNEL_ID</id><enabled>Y</enabled><name>CHANNEL_ID</name></field><field><id>LOG_DATE</id><enabled>Y</enabled><name>LOG_DATE</name></field><field><id>TRANSNAME</id><enabled>Y</enabled><name>TRANSNAME</name></field><field><id>STEPNAME</id><enabled>Y</enabled><name>STEPNAME</name></field><field><id>STEP_COPY</id><enabled>Y</enabled><name>STEP_COPY</name></field><field><id>LINES_READ</id><enabled>Y</enabled><name>LINES_READ</name></field><field><id>LINES_WRITTEN</id><enabled>Y</enabled><name>LINES_WRITTEN</name></field><field><id>LINES_UPDATED</id><enabled>Y</enabled><name>LINES_UPDATED</name></field><field><id>LINES_INPUT</id><enabled>Y</enabled><name>LINES_INPUT</name></field><field><id>LINES_OUTPUT</id><enabled>Y</enabled><name>LINES_OUTPUT</name></field><field><id>LINES_REJECTED</id><enabled>Y</enabled><name>LINES_REJECTED</name></field><field><id>ERRORS</id><enabled>Y</enabled><name>ERRORS</name></field><field><id>LOG_FIELD</id><enabled>N</enabled><name>LOG_FIELD</name></field></step-log-table>
    </log>
    <maxdate>
      <connection/>
      <table/>
      <field/>
      <offset>0.0</offset>
      <maxdiff>0.0</maxdiff>
    </maxdate>
    <size_rowset>10000</size_rowset>
    <sleep_time_empty>50</sleep_time_empty>
    <sleep_time_full>50</sleep_time_full>
    <unique_connections>N</unique_connections>
    <feedback_shown>Y</feedback_shown>
    <feedback_size>50000</feedback_size>
    <using_thread_priorities>Y</using_thread_priorities>
    <shared_objects_file/>
    <capture_step_performance>N</capture_step_performance>
    <step_performance_capturing_delay>1000</step_performance_capturing_delay>
    <step_performance_capturing_size_limit>100</step_performance_capturing_size_limit>
    <dependencies>
    </dependencies>
    <partitionschemas>
    </partitionschemas>
    <slaveservers>
    </slaveservers>
    <clusterschemas>
    </clusterschemas>
  <created_user>-</created_user>
  <created_date>2011&#47;10&#47;18 14:12:12.953</created_date>
  <modified_user>admin</modified_user>
  <modified_date>2011&#47;12&#47;02 14:53:31.334</modified_date>
  </info>
  <notepads>
    <notepad>
      <note>月ラベルの開始日・終了日を算出するために
チケットIDごとのWBS開始日・終了日、
作業記録開始日・終了日、進捗開始日・終了日を取得する。
</note>
      <xloc>407</xloc>
      <yloc>283</yloc>
      <width>444</width>
      <heigth>61</heigth>
      <fontname>Ariel</fontname>
      <fontsize>10</fontsize>
      <fontbold>N</fontbold>
      <fontitalic>N</fontitalic>
      <fontcolorred>0</fontcolorred>
      <fontcolorgreen>0</fontcolorgreen>
      <fontcolorblue>0</fontcolorblue>
      <backgroundcolorred>255</backgroundcolorred>
      <backgroundcolorgreen>255</backgroundcolorgreen>
      <backgroundcolorblue>128</backgroundcolorblue>
      <bordercolorred>100</bordercolorred>
      <bordercolorgreen>100</bordercolorgreen>
      <bordercolorblue>100</bordercolorblue>
      <drawshadow>Y</drawshadow>
    </notepad>
    <notepad>
      <note>・変数 ${BATCH_DATE_FILE} にあるファイルから
バッチ日付(yyyy&#47;MM&#47;dd)を取得する。
・変数 ${PROJECT_ID} からプロジェクトID を取得する。
</note>
      <xloc>70</xloc>
      <yloc>20</yloc>
      <width>406</width>
      <heigth>61</heigth>
      <fontname>Ariel</fontname>
      <fontsize>10</fontsize>
      <fontbold>N</fontbold>
      <fontitalic>N</fontitalic>
      <fontcolorred>0</fontcolorred>
      <fontcolorgreen>0</fontcolorgreen>
      <fontcolorblue>0</fontcolorblue>
      <backgroundcolorred>255</backgroundcolorred>
      <backgroundcolorgreen>255</backgroundcolorgreen>
      <backgroundcolorblue>128</backgroundcolorblue>
      <bordercolorred>100</bordercolorred>
      <bordercolorgreen>100</bordercolorgreen>
      <bordercolorblue>100</bordercolorblue>
      <drawshadow>Y</drawshadow>
    </notepad>
    <notepad>
      <note>WBS開始日、作業記録開始日、進捗開始日のうち最も早い日を算出
WBS終了日、作業記録終了日、進捗終了日のうち最も遅い日を算出</note>
      <xloc>1171</xloc>
      <yloc>191</yloc>
      <width>503</width>
      <heigth>44</heigth>
      <fontname>Ariel</fontname>
      <fontsize>10</fontsize>
      <fontbold>N</fontbold>
      <fontitalic>N</fontitalic>
      <fontcolorred>0</fontcolorred>
      <fontcolorgreen>0</fontcolorgreen>
      <fontcolorblue>0</fontcolorblue>
      <backgroundcolorred>255</backgroundcolorred>
      <backgroundcolorgreen>255</backgroundcolorgreen>
      <backgroundcolorblue>128</backgroundcolorblue>
      <bordercolorred>100</bordercolorred>
      <bordercolorgreen>100</bordercolorgreen>
      <bordercolorblue>100</bordercolorblue>
      <drawshadow>Y</drawshadow>
    </notepad>
  </notepads>
  <connection>
    <name>ETL_test</name>
    <server>${HOST_NAME}</server>
    <type>POSTGRESQL</type>
    <access>Native</access>
    <database>${IPF_DB_NAME}</database>
    <port>${PORT_NO}</port>
    <username>${IPF_DB_USER}</username>
    <password>${IPF_DB_PASS}</password>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <attribute><code>FORCE_IDENTIFIERS_TO_LOWERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_UPPERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>IS_CLUSTERED</code><attribute>N</attribute></attribute>
      <attribute><code>PORT_NUMBER</code><attribute>${PORT_NO}</attribute></attribute>
      <attribute><code>QUOTE_ALL_FIELDS</code><attribute>N</attribute></attribute>
      <attribute><code>SUPPORTS_BOOLEAN_DATA_TYPE</code><attribute>N</attribute></attribute>
      <attribute><code>USE_POOLING</code><attribute>N</attribute></attribute>
    </attributes>
  </connection>
  <connection>
    <name>IPF_DB</name>
    <server>${IPF_DB_HOST}</server>
    <type>POSTGRESQL</type>
    <access>Native</access>
    <database>${IPF_DB_NAME}</database>
    <port>${IPF_DB_PORT}</port>
    <username>${IPF_DB_USER}</username>
    <password>${IPF_DB_PASS}</password>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <attribute><code>FORCE_IDENTIFIERS_TO_LOWERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_UPPERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>IS_CLUSTERED</code><attribute>N</attribute></attribute>
      <attribute><code>PORT_NUMBER</code><attribute>${IPF_DB_PORT}</attribute></attribute>
      <attribute><code>QUOTE_ALL_FIELDS</code><attribute>N</attribute></attribute>
      <attribute><code>SQL_CONNECT</code><attribute>SET search_path TO ${IPF_DB_SCHEMA};</attribute></attribute>
      <attribute><code>SUPPORTS_BOOLEAN_DATA_TYPE</code><attribute>N</attribute></attribute>
      <attribute><code>USE_POOLING</code><attribute>N</attribute></attribute>
    </attributes>
  </connection>
  <connection>
    <name>rm</name>
    <server>192.168.1.209</server>
    <type>POSTGRESQL</type>
    <access>Native</access>
    <database>rm</database>
    <port>5432</port>
    <username>rm</username>
    <password>Encrypted 2be98afc86aa7f2e4cb79ce10bef2bdd7</password>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <attribute><code>FORCE_IDENTIFIERS_TO_LOWERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_UPPERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>IS_CLUSTERED</code><attribute>N</attribute></attribute>
      <attribute><code>PORT_NUMBER</code><attribute>5432</attribute></attribute>
      <attribute><code>QUOTE_ALL_FIELDS</code><attribute>N</attribute></attribute>
      <attribute><code>SUPPORTS_BOOLEAN_DATA_TYPE</code><attribute>N</attribute></attribute>
      <attribute><code>USE_POOLING</code><attribute>N</attribute></attribute>
    </attributes>
  </connection>
  <connection>
    <name>RM_DB</name>
    <server>${RM_DB_HOST}</server>
    <type>POSTGRESQL</type>
    <access>Native</access>
    <database>${RM_DB_NAME}</database>
    <port>${RM_DB_PORT}</port>
    <username>${RM_DB_USER}</username>
    <password>${RM_DB_PASS}</password>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <attribute><code>FORCE_IDENTIFIERS_TO_LOWERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_UPPERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>IS_CLUSTERED</code><attribute>N</attribute></attribute>
      <attribute><code>PORT_NUMBER</code><attribute>${RM_DB_PORT}</attribute></attribute>
      <attribute><code>QUOTE_ALL_FIELDS</code><attribute>N</attribute></attribute>
      <attribute><code>SUPPORTS_BOOLEAN_DATA_TYPE</code><attribute>N</attribute></attribute>
      <attribute><code>USE_POOLING</code><attribute>N</attribute></attribute>
    </attributes>
  </connection>
  <connection>
    <name>TRAC_DB</name>
    <server>${TRAC_DB_HOST}</server>
    <type>POSTGRESQL</type>
    <access>Native</access>
    <database>${TRAC_DB_NAME}</database>
    <port>${TRAC_DB_PORT}</port>
    <username>${TRAC_DB_USER}</username>
    <password>${TRAC_DB_PASS}</password>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <attribute><code>FORCE_IDENTIFIERS_TO_LOWERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_UPPERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>IS_CLUSTERED</code><attribute>N</attribute></attribute>
      <attribute><code>PORT_NUMBER</code><attribute>${TRAC_DB_PORT}</attribute></attribute>
      <attribute><code>QUOTE_ALL_FIELDS</code><attribute>N</attribute></attribute>
      <attribute><code>SQL_CONNECT</code><attribute>SET search_path TO ${TRAC_DB_SCHEMA};
</attribute></attribute>
      <attribute><code>SUPPORTS_BOOLEAN_DATA_TYPE</code><attribute>N</attribute></attribute>
      <attribute><code>USE_POOLING</code><attribute>N</attribute></attribute>
    </attributes>
  </connection>
  <connection>
    <name>tracdb</name>
    <server>${HOST_NAME}</server>
    <type>POSTGRESQL</type>
    <access>Native</access>
    <database>${TRAC_DB_NAME}</database>
    <port>${PORT_NO}</port>
    <username>${TRAC_DB_USER}</username>
    <password>${TRAC_DB_PASS}</password>
    <servername/>
    <data_tablespace/>
    <index_tablespace/>
    <attributes>
      <attribute><code>FORCE_IDENTIFIERS_TO_LOWERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>FORCE_IDENTIFIERS_TO_UPPERCASE</code><attribute>N</attribute></attribute>
      <attribute><code>IS_CLUSTERED</code><attribute>N</attribute></attribute>
      <attribute><code>PORT_NUMBER</code><attribute>${PORT_NO}</attribute></attribute>
      <attribute><code>QUOTE_ALL_FIELDS</code><attribute>N</attribute></attribute>
      <attribute><code>SUPPORTS_BOOLEAN_DATA_TYPE</code><attribute>N</attribute></attribute>
      <attribute><code>USE_POOLING</code><attribute>N</attribute></attribute>
    </attributes>
  </connection>
  <order>
  <hop> <from>SQLパラメータ 5</from><to>WBS開始日・終了日取得</to><enabled>Y</enabled> </hop>  <hop> <from>月ラベルレコード複製</from><to>月ラベル作成</to><enabled>Y</enabled> </hop>  <hop> <from>SQLパラメータ 6</from><to>作業記録開始日・終了日取得</to><enabled>Y</enabled> </hop>  <hop> <from>SQLパラメータ 7</from><to>進捗開始日・終了日取得</to><enabled>Y</enabled> </hop>  <hop> <from>WBS開始日・終了日取得</from><to>結合</to><enabled>Y</enabled> </hop>  <hop> <from>作業記録開始日・終了日取得</from><to>結合</to><enabled>Y</enabled> </hop>  <hop> <from>進捗開始日・終了日取得</from><to>結合 2</to><enabled>Y</enabled> </hop>  <hop> <from>結合</from><to>ticket_idマージ</to><enabled>Y</enabled> </hop>  <hop> <from>結合 2</from><to>ticket_idマージ 2</to><enabled>Y</enabled> </hop>  <hop> <from>ticket_idマージ 2</from><to>不要列削除 2</to><enabled>Y</enabled> </hop>  <hop> <from>ticket_idマージ</from><to>不要列削除 3</to><enabled>Y</enabled> </hop>  <hop> <from>不要列削除 3</from><to>結合 2</to><enabled>Y</enabled> </hop>  <hop> <from>月ラベル作成</from><to>日付型書式設定</to><enabled>Y</enabled> </hop>  <hop> <from>SQLパラメータ 4</from><to>WBS情報取得</to><enabled>Y</enabled> </hop>  <hop> <from>作業記録検索</from><to>工数実績値算出</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing 3</from><to>SQLパラメータ 6</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing 3</from><to>SQLパラメータ 7</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing 4</from><to>SQLパラメータ 3</to><enabled>Y</enabled> </hop>  <hop> <from>SQLパラメータ 3</from><to>作業記録取得</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing 5</from><to>月ラベル情報 2</to><enabled>Y</enabled> </hop>  <hop> <from>列選択 2</from><to>ソート 4</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing 4</from><to>do nothing 6</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing 6</from><to>SQLパラメータ 2</to><enabled>Y</enabled> </hop>  <hop> <from>SQLパラメータ 2</from><to>進捗情報取得</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing 5</from><to>do nothing 7</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing 7</from><to>月ラベル情報 3</to><enabled>Y</enabled> </hop>  <hop> <from>ソート 9</from><to>進捗情報（最新）</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing 6</from><to>do nothing 8</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing 8</from><to>SQLパラメータ</to><enabled>Y</enabled> </hop>  <hop> <from>SQLパラメータ</from><to>ソース規模取得</to><enabled>Y</enabled> </hop>  <hop> <from>バッチ日付入力</from><to>結合0</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing 7</from><to>do nothing 9</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing 9</from><to>フィールド選択 5</to><enabled>Y</enabled> </hop>  <hop> <from>終了日列選択</from><to>列→行変換</to><enabled>Y</enabled> </hop>  <hop> <from>不要列削除 2</from><to>do nothing 10</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing 10</from><to>終了日列選択</to><enabled>Y</enabled> </hop>  <hop> <from>開始日列選択</from><to>列→行変換 2</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing 10</from><to>開始日列選択</to><enabled>Y</enabled> </hop>  <hop> <from>列→行変換</from><to>NULL除去 2</to><enabled>Y</enabled> </hop>  <hop> <from>NULL除去 2</from><to>最終日算出</to><enabled>Y</enabled> </hop>  <hop> <from>列→行変換 2</from><to>NULL除去</to><enabled>Y</enabled> </hop>  <hop> <from>NULL除去</from><to>最初日算出</to><enabled>Y</enabled> </hop>  <hop> <from>NULL除去</from><to>NULL</to><enabled>Y</enabled> </hop>  <hop> <from>NULL除去 2</from><to>NULL 2</to><enabled>Y</enabled> </hop>  <hop> <from>WBS情報取得</from><to>WBS親子関係</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing 3</from><to>do nothing 13</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing 13</from><to>SQLパラメータ 4</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing 2</from><to>do nothing 14</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing 14</from><to>月ラベル情報</to><enabled>Y</enabled> </hop>  <hop> <from>工数計画値算出</from><to>列選択</to><enabled>Y</enabled> </hop>  <hop> <from>WBS親子関係</from><to>ソート 2</to><enabled>Y</enabled> </hop>  <hop> <from>列選択</from><to>ソート</to><enabled>Y</enabled> </hop>  <hop> <from>ソート</from><to>WBS親子マージ</to><enabled>Y</enabled> </hop>  <hop> <from>WBS親子マージ</from><to>列選択 11</to><enabled>Y</enabled> </hop>  <hop> <from>列選択 11</from><to>ソート 3</to><enabled>Y</enabled> </hop>  <hop> <from>ソート 3</from><to>集計</to><enabled>Y</enabled> </hop>  <hop> <from>ソート 4</from><to>WBS親子マージ 2</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing 16</from><to>WBS親子マージ 2</to><enabled>Y</enabled> </hop>  <hop> <from>ソート 8</from><to>作業記録マージ</to><enabled>Y</enabled> </hop>  <hop> <from>作業記録マージ</from><to>列選択 2</to><enabled>Y</enabled> </hop>  <hop> <from>WBS親子マージ 2</from><to>列選択 5</to><enabled>Y</enabled> </hop>  <hop> <from>列選択 5</from><to>ソート 6</to><enabled>Y</enabled> </hop>  <hop> <from>ソート 6</from><to>集計 2</to><enabled>Y</enabled> </hop>  <hop> <from>集計 2</from><to>作業記録検索</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing 13</from><to>do nothing 4</to><enabled>Y</enabled> </hop>  <hop> <from>月ラベル情報 2</from><to>ソート 8</to><enabled>Y</enabled> </hop>  <hop> <from>ソート 7</from><to>作業記録（累計）</to><enabled>Y</enabled> </hop>  <hop> <from>作業記録（累計）</from><to>作業記録マージ</to><enabled>Y</enabled> </hop>  <hop> <from>月ラベル情報 3</from><to>ソート 11</to><enabled>Y</enabled> </hop>  <hop> <from>進捗情報（最新）</from><to>進捗情報マージ</to><enabled>Y</enabled> </hop>  <hop> <from>ソート 11</from><to>進捗情報マージ</to><enabled>Y</enabled> </hop>  <hop> <from>列選択 4</from><to>ソート 12</to><enabled>Y</enabled> </hop>  <hop> <from>進捗情報マージ</from><to>生産価値(WBS進捗)算出</to><enabled>Y</enabled> </hop>  <hop> <from>生産価値(WBS進捗)算出</from><to>列選択 4</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing 16</from><to>do nothing 15</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing 15</from><to>WBS親子マージ 3</to><enabled>Y</enabled> </hop>  <hop> <from>ソート 12</from><to>WBS親子マージ 3</to><enabled>Y</enabled> </hop>  <hop> <from>WBS親子マージ 3</from><to>列選択 6</to><enabled>Y</enabled> </hop>  <hop> <from>列選択 6</from><to>ソート 13</to><enabled>Y</enabled> </hop>  <hop> <from>ソート 13</from><to>集計 3</to><enabled>Y</enabled> </hop>  <hop> <from>集計 3</from><to>生産価値（WBS進捗）検索</to><enabled>Y</enabled> </hop>  <hop> <from>ソート 14</from><to>ソース規模（最新）</to><enabled>Y</enabled> </hop>  <hop> <from>フィールド選択 5</from><to>ソート 15</to><enabled>Y</enabled> </hop>  <hop> <from>ソート 15</from><to>ソース規模マージ</to><enabled>Y</enabled> </hop>  <hop> <from>列選択 7</from><to>ソート 16</to><enabled>Y</enabled> </hop>  <hop> <from>ソース規模取得</from><to>ソート 18</to><enabled>Y</enabled> </hop>  <hop> <from>進捗情報取得</from><to>ソート 19</to><enabled>Y</enabled> </hop>  <hop> <from>作業記録取得</from><to>ソート 20</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing 15</from><to>do nothing 17</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing 17</from><to>WBS親子マージ 4</to><enabled>Y</enabled> </hop>  <hop> <from>ソート 16</from><to>WBS親子マージ 4</to><enabled>Y</enabled> </hop>  <hop> <from>WBS親子マージ 4</from><to>列選択 8</to><enabled>Y</enabled> </hop>  <hop> <from>列選択 8</from><to>ソート 21</to><enabled>Y</enabled> </hop>  <hop> <from>ソート 21</from><to>集計 4</to><enabled>Y</enabled> </hop>  <hop> <from>生産価値(ソース規模)算出</from><to>列選択 7</to><enabled>Y</enabled> </hop>  <hop> <from>生産価値（WBS進捗）検索</from><to>ソース規模情報検索</to><enabled>Y</enabled> </hop>  <hop> <from>集計 4</from><to>ソース規模情報検索</to><enabled>Y</enabled> </hop>  <hop> <from>ソース規模マージ</from><to>進捗情報マージ 2</to><enabled>Y</enabled> </hop>  <hop> <from>進捗情報マージ 2</from><to>生産価値(ソース規模)算出</to><enabled>Y</enabled> </hop>  <hop> <from>進捗情報（最新）</from><to>進捗情報マージ 2</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing 18</from><to>do nothing 19</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing 19</from><to>do nothing 20</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing 20</from><to>完成時予測工数算出</to><enabled>Y</enabled> </hop>  <hop> <from>不要レコード削除</from><to>必要レコード</to><enabled>Y</enabled> </hop>  <hop> <from>プロジェクトID取得</from><to>結合0</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing 3</from><to>SQLパラメータ 5</to><enabled>Y</enabled> </hop>  <hop> <from>バッチ日付の次の日算出</from><to>do nothing 3</to><enabled>Y</enabled> </hop>  <hop> <from>結合0</from><to>バッチ日付の次の日算出</to><enabled>Y</enabled> </hop>  <hop> <from>不要列削除 2</from><to>結合 3</to><enabled>Y</enabled> </hop>  <hop> <from>最初日算出</from><to>結合 5</to><enabled>Y</enabled> </hop>  <hop> <from>最終日算出</from><to>結合 5</to><enabled>Y</enabled> </hop>  <hop> <from>結合 5</from><to>結合 3</to><enabled>Y</enabled> </hop>  <hop> <from>月ラベル情報</from><to>工数計画値算出</to><enabled>Y</enabled> </hop>  <hop> <from>集計</from><to>最下位フラグ設定</to><enabled>Y</enabled> </hop>  <hop> <from>不要列削除 7</from><to>作業記録検索</to><enabled>Y</enabled> </hop>  <hop> <from>最下位フラグ設定</from><to>結合 4</to><enabled>Y</enabled> </hop>  <hop> <from>不要列削除 4</from><to>ソート 25</to><enabled>Y</enabled> </hop>  <hop> <from>結合 3</from><to>不要列削除 8</to><enabled>Y</enabled> </hop>  <hop> <from>工数実績値算出</from><to>不要列削除 9</to><enabled>Y</enabled> </hop>  <hop> <from>不要列削除 9</from><to>生産価値（WBS進捗）検索</to><enabled>Y</enabled> </hop>  <hop> <from>完成時予測工数算出</from><to>不足月ラベル行追加</to><enabled>Y</enabled> </hop>  <hop> <from>不要列削除 8</from><to>月ラベルレコード数算出</to><enabled>Y</enabled> </hop>  <hop> <from>月ラベルレコード数算出</from><to>月ラベルレコード複製</to><enabled>Y</enabled> </hop>  <hop> <from>ソート 2</from><to>do nothing 11</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing 11</from><to>WBS親子マージ</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing 11</from><to>do nothing 16</to><enabled>Y</enabled> </hop>  <hop> <from>日付型書式設定</from><to>do nothing</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing</from><to>ソート 22</to><enabled>Y</enabled> </hop>  <hop> <from>ソート 22</from><to>結合 4</to><enabled>Y</enabled> </hop>  <hop> <from>レベル最大値取得</from><to>最下位チケット抽出</to><enabled>Y</enabled> </hop>  <hop> <from>最下位チケット抽出</from><to>最下位以外</to><enabled>Y</enabled> </hop>  <hop> <from>最下位チケット抽出</from><to>最下位</to><enabled>Y</enabled> </hop>  <hop> <from>最下位</from><to>列名変更</to><enabled>Y</enabled> </hop>  <hop> <from>列名変更</from><to>ソート 26</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing</from><to>ソート 27</to><enabled>Y</enabled> </hop>  <hop> <from>ソート 27</from><to>最下位WBSチケット結合</to><enabled>Y</enabled> </hop>  <hop> <from>ソート 26</from><to>最下位WBSチケット結合</to><enabled>Y</enabled> </hop>  <hop> <from>最下位WBSチケット結合</from><to>不要列削除 10</to><enabled>Y</enabled> </hop>  <hop> <from>不要列削除 10</from><to>do nothing 2</to><enabled>Y</enabled> </hop>  <hop> <from>WBS親子関係</from><to>ソート 28</to><enabled>Y</enabled> </hop>  <hop> <from>ソート 28</from><to>レベル最大値取得</to><enabled>Y</enabled> </hop>  <hop> <from>結合 4</from><to>工数計画値（グラフ表示）算出</to><enabled>Y</enabled> </hop>  <hop> <from>工数計画値（グラフ表示）算出</from><to>不要列削除 7</to><enabled>Y</enabled> </hop>  <hop> <from>ソート 25</from><to>不要レコード削除 2</to><enabled>Y</enabled> </hop>  <hop> <from>不要レコード削除 2</from><to>不要レコード削除</to><enabled>Y</enabled> </hop>  <hop> <from>不足月ラベル行追加</from><to>ソート 24</to><enabled>Y</enabled> </hop>  <hop> <from>ソート 24</from><to>工数予測値算出</to><enabled>Y</enabled> </hop>  <hop> <from>工数予測値算出</from><to>スケジュール遅延工数算出（継続）</to><enabled>Y</enabled> </hop>  <hop> <from>列名変更 2</from><to>工数予測値グラフ表示</to><enabled>Y</enabled> </hop>  <hop> <from>工数予測値グラフ表示</from><to>不要列削除 4</to><enabled>Y</enabled> </hop>  <hop> <from>ソース規模（最新）</from><to>ソース規模（集計）</to><enabled>Y</enabled> </hop>  <hop> <from>ソース規模（集計）</from><to>ソース規模マージ</to><enabled>Y</enabled> </hop>  <hop> <from>必要レコード</from><to>親チケットID_0変換</to><enabled>Y</enabled> </hop>  <hop> <from>親チケットID_0変換</from><to>工数単位変換</to><enabled>Y</enabled> </hop>  <hop> <from>ソース規模情報検索</from><to>生産価値（グラフ表示用）算出</to><enabled>Y</enabled> </hop>  <hop> <from>生産価値（グラフ表示用）算出</from><to>do nothing 18</to><enabled>Y</enabled> </hop>  <hop> <from>do nothing 14</from><to>ソート 23</to><enabled>Y</enabled> </hop>  <hop> <from>ソート 23</from><to>do nothing 5</to><enabled>Y</enabled> </hop>  <hop> <from>ソート 19</from><to>月ラベル結合 2</to><enabled>Y</enabled> </hop>  <hop> <from>月ラベル情報 3</from><to>月ラベル結合 2</to><enabled>Y</enabled> </hop>  <hop> <from>月ラベル結合 2</from><to>Filter rows</to><enabled>Y</enabled> </hop>  <hop> <from>Filter rows</from><to>ソート 9</to><enabled>Y</enabled> </hop>  <hop> <from>ソート 18</from><to>月ラベル結合 4</to><enabled>Y</enabled> </hop>  <hop> <from>フィールド選択 5</from><to>月ラベル結合 4</to><enabled>Y</enabled> </hop>  <hop> <from>月ラベル結合 4</from><to>Filter rows 2</to><enabled>Y</enabled> </hop>  <hop> <from>Filter rows 2</from><to>ソート 14</to><enabled>Y</enabled> </hop>  <hop> <from>Filter rows 3</from><to>ソート 7</to><enabled>Y</enabled> </hop>  <hop> <from>ソート 20</from><to>月ラベル結合 5</to><enabled>Y</enabled> </hop>  <hop> <from>月ラベル情報 2</from><to>月ラベル結合 5</to><enabled>Y</enabled> </hop>  <hop> <from>月ラベル結合 5</from><to>Filter rows 3</to><enabled>Y</enabled> </hop>  <hop> <from>データ削除</from><to>結合0</to><enabled>Y</enabled> </hop>  <hop> <from>工数単位変換</from><to>r_s04_m_mart</to><enabled>Y</enabled> </hop>  <hop> <from>スケジュール遅延工数算出（継続）</from><to>スケジュール遅延工数算出（特別）</to><enabled>Y</enabled> </hop>  <hop> <from>スケジュール遅延工数算出（特別）</from><to>列名変更 2</to><enabled>Y</enabled> </hop>  </order>
  <step>
    <name>Excel_工数予測値グラフ表示</name>
    <type>ExcelOutput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <header>Y</header>
    <footer>N</footer>
    <encoding/>
    <append>N</append>
    <add_to_result_filenames>Y</add_to_result_filenames>
    <file>
      <name>${Internal.Transformation.Filename.Directory}&#47;工数予測値グラフ表示</name>
      <extention>xls</extention>
      <do_not_open_newfile_init>N</do_not_open_newfile_init>
      <split>N</split>
      <add_date>N</add_date>
      <add_time>N</add_time>
      <SpecifyFormat>N</SpecifyFormat>
      <date_time_format/>
      <sheetname>Sheet1</sheetname>
      <autosizecolums>N</autosizecolums>
      <nullisblank>N</nullisblank>
      <protect_sheet>N</protect_sheet>
      <password>Encrypted </password>
      <splitevery>0</splitevery>
      </file>
    <template>
      <enabled>N</enabled>
      <append>N</append>
      <filename>template.xls</filename>
    </template>
    <fields>
      <field>
        <name>estimate_wbs_continue_tmp</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>estimate_sloc_continue_tmp</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>estimate_wbs_continue</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>estimate_sloc_continue</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>actual_cost</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>actual_cost_graph</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>batch_date</name>
        <type>Date</type>
        <format/>
      </field>
      <field>
        <name>cpi_sloc</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>cpi_wbs</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>eac_sloc_continue</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>eac_sloc_special</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>eac_wbs_continue</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>eac_wbs_special</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>earned_value_sloc</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>earned_value_wbs</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>est_complete_date</name>
        <type>Date</type>
        <format/>
      </field>
      <field>
        <name>est_complete_date_sloc</name>
        <type>Date</type>
        <format/>
      </field>
      <field>
        <name>est_complete_date_wbs</name>
        <type>Date</type>
        <format/>
      </field>
      <field>
        <name>est_sloc_continue_delay_delta</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>est_sloc_continue_delta</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>est_sloc_special_delta</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>est_wbs_continue_delay_delta</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>est_wbs_continue_delta</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>est_wbs_special_delta</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>estimate_sloc_special</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>estimate_wbs_special</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>first_start_date</name>
        <type>Date</type>
        <format/>
      </field>
      <field>
        <name>last_end_date</name>
        <type>Date</type>
        <format/>
      </field>
      <field>
        <name>month_count</name>
        <type>Integer</type>
        <format/>
      </field>
      <field>
        <name>month_first_date</name>
        <type>Date</type>
        <format/>
      </field>
      <field>
        <name>month_label_date</name>
        <type>Date</type>
        <format/>
      </field>
      <field>
        <name>month_label_end_date</name>
        <type>Date</type>
        <format/>
      </field>
      <field>
        <name>month_label_next_date</name>
        <type>Date</type>
        <format/>
      </field>
      <field>
        <name>month_label_prev_date</name>
        <type>Date</type>
        <format/>
      </field>
      <field>
        <name>month_last_date</name>
        <type>Date</type>
        <format/>
      </field>
      <field>
        <name>month_num</name>
        <type>Integer</type>
        <format/>
      </field>
      <field>
        <name>parent_id</name>
        <type>Integer</type>
        <format/>
      </field>
      <field>
        <name>planned_cost</name>
        <type>BigNumber</type>
        <format/>
      </field>
      <field>
        <name>planned_month_value</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>planned_sloc</name>
        <type>Integer</type>
        <format/>
      </field>
      <field>
        <name>planned_value</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>planned_value_delta</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>planned_value_graph</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>planned_value_last</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>prev_est_sloc_continue</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>prev_est_sloc_special</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>prev_est_wbs_continue</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>prev_est_wbs_special</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>project_id</name>
        <type>Integer</type>
        <format/>
      </field>
      <field>
        <name>remain_cost_sloc_continue</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>remain_cost_sloc_continue_delay</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>remain_cost_wbs_continue</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>remain_cost_wbs_continue_delay</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>remain_days_sloc</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>remain_days_wbs</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>sloc_progress</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>spi_sloc</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>spi_wbs</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>subject</name>
        <type>String</type>
        <format/>
      </field>
      <field>
        <name>terminal_flg</name>
        <type>String</type>
        <format/>
      </field>
      <field>
        <name>ticket_id</name>
        <type>Integer</type>
        <format/>
      </field>
      <field>
        <name>wbs_end_date</name>
        <type>Date</type>
        <format/>
      </field>
      <field>
        <name>wbs_progress</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>wbs_start_date</name>
        <type>Date</type>
        <format/>
      </field>
      <field>
        <name>estimate_wbs_continue_graph</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>estimate_wbs_special_graph</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>estimate_sloc_continue_graph</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>estimate_sloc_special_graph</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>prev_est_wbs_continue_graph</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>prev_est_wbs_special_graph</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>prev_est_sloc_continue_graph</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>prev_est_sloc_special_graph</name>
        <type>Number</type>
        <format/>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1486</xloc>
      <yloc>2297</yloc>
      <draw>N</draw>
      </GUI>
    </step>

  <step>
    <name>Excel_工数実績値算出</name>
    <type>ExcelOutput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <header>Y</header>
    <footer>N</footer>
    <encoding/>
    <append>N</append>
    <add_to_result_filenames>Y</add_to_result_filenames>
    <file>
      <name>${Internal.Transformation.Filename.Directory}&#47;工数実績値算出</name>
      <extention>xls</extention>
      <do_not_open_newfile_init>N</do_not_open_newfile_init>
      <split>N</split>
      <add_date>N</add_date>
      <add_time>N</add_time>
      <SpecifyFormat>N</SpecifyFormat>
      <date_time_format/>
      <sheetname>Sheet1</sheetname>
      <autosizecolums>N</autosizecolums>
      <nullisblank>N</nullisblank>
      <protect_sheet>N</protect_sheet>
      <password>Encrypted </password>
      <splitevery>0</splitevery>
      </file>
    <template>
      <enabled>N</enabled>
      <append>N</append>
      <filename>template.xls</filename>
    </template>
    <fields>
      <field>
        <name>month_num</name>
        <type>Integer</type>
        <format/>
      </field>
      <field>
        <name>month_label_date</name>
        <type>Date</type>
        <format/>
      </field>
      <field>
        <name>ticket_id</name>
        <type>Integer</type>
        <format/>
      </field>
      <field>
        <name>planned_cost</name>
        <type>BigNumber</type>
        <format/>
      </field>
      <field>
        <name>planned_sloc</name>
        <type>Integer</type>
        <format/>
      </field>
      <field>
        <name>planned_value</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>planned_value_last</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>planned_month_value</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>terminal_flg</name>
        <type>String</type>
        <format/>
      </field>
      <field>
        <name>batch_date</name>
        <type>Date</type>
        <format/>
      </field>
      <field>
        <name>project_id</name>
        <type>Integer</type>
        <format/>
      </field>
      <field>
        <name>subject</name>
        <type>String</type>
        <format/>
      </field>
      <field>
        <name>parent_id</name>
        <type>Integer</type>
        <format/>
      </field>
      <field>
        <name>wbs_start_date</name>
        <type>Date</type>
        <format/>
      </field>
      <field>
        <name>wbs_end_date</name>
        <type>Date</type>
        <format/>
      </field>
      <field>
        <name>first_start_date</name>
        <type>Date</type>
        <format/>
      </field>
      <field>
        <name>last_end_date</name>
        <type>Date</type>
        <format/>
      </field>
      <field>
        <name>month_first_date</name>
        <type>Date</type>
        <format/>
      </field>
      <field>
        <name>month_last_date</name>
        <type>Date</type>
        <format/>
      </field>
      <field>
        <name>month_count</name>
        <type>Integer</type>
        <format/>
      </field>
      <field>
        <name>month_label_next_date</name>
        <type>Date</type>
        <format/>
      </field>
      <field>
        <name>month_label_prev_date</name>
        <type>Date</type>
        <format/>
      </field>
      <field>
        <name>month_label_end_date</name>
        <type>Date</type>
        <format/>
      </field>
      <field>
        <name>planned_value_graph</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>work_time</name>
        <type>BigNumber</type>
        <format/>
      </field>
      <field>
        <name>work_end_date</name>
        <type>Date</type>
        <format/>
      </field>
      <field>
        <name>actual_cost</name>
        <type>Number</type>
        <format/>
      </field>
      <field>
        <name>actual_cost_graph</name>
        <type>Number</type>
        <format/>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>2320</xloc>
      <yloc>1508</yloc>
      <draw>N</draw>
      </GUI>
    </step>

  <step>
    <name>Filter rows</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<send_true_to/>
<send_false_to/>
    <compare>
<condition>
 <negated>N</negated>
 <leftvalue>thedate</leftvalue>
 <function>&lt;</function>
 <rightvalue>month_label_next_date</rightvalue>
 </condition>
    </compare>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>839</xloc>
      <yloc>1475</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Filter rows 2</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<send_true_to/>
<send_false_to/>
    <compare>
<condition>
 <negated>N</negated>
 <leftvalue>change_date</leftvalue>
 <function>&lt;</function>
 <rightvalue>month_label_next_date</rightvalue>
 </condition>
    </compare>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>826</xloc>
      <yloc>1709</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>Filter rows 3</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<send_true_to/>
<send_false_to/>
    <compare>
<condition>
 <negated>N</negated>
 <leftvalue>work_date</leftvalue>
 <function>&lt;</function>
 <rightvalue>month_label_next_date</rightvalue>
 </condition>
    </compare>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>867</xloc>
      <yloc>1222</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>NULL</name>
    <type>Dummy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1548</xloc>
      <yloc>271</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>NULL 2</name>
    <type>Dummy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1550</xloc>
      <yloc>499</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>NULL除去</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<send_true_to>最初日算出</send_true_to>
<send_false_to>NULL</send_false_to>
    <compare>
<condition>
 <negated>N</negated>
 <leftvalue>start_date</leftvalue>
 <function>IS NOT NULL</function>
 <rightvalue/>
 </condition>
    </compare>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1434</xloc>
      <yloc>333</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>NULL除去 2</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<send_true_to>最終日算出</send_true_to>
<send_false_to>NULL 2</send_false_to>
    <compare>
<condition>
 <negated>N</negated>
 <leftvalue>end_date</leftvalue>
 <function>IS NOT NULL</function>
 <rightvalue/>
 </condition>
    </compare>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1432</xloc>
      <yloc>420</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>SQLパラメータ</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>project_id</name>
        <rename>p1</rename>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>batch_next_date</name>
        <rename>p2</rename>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>378</xloc>
      <yloc>1706</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>SQLパラメータ 2</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>project_id</name>
        <rename>p1</rename>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>batch_next_date</name>
        <rename>p2</rename>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>399</xloc>
      <yloc>1470</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>SQLパラメータ 3</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>project_id</name>
        <rename>p1</rename>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>batch_next_date</name>
        <rename>p2</rename>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>409</xloc>
      <yloc>1213</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>SQLパラメータ 4</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>project_id</name>
        <rename>p1</rename>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>398</xloc>
      <yloc>702</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>SQLパラメータ 5</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>batch_date</name>
        <rename>p0</rename>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>project_id</name>
        <rename>p1</rename>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>400</xloc>
      <yloc>383</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>SQLパラメータ 6</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>project_id</name>
        <rename>p1</rename>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>batch_next_date</name>
        <rename>p2</rename>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>392</xloc>
      <yloc>488</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>SQLパラメータ 7</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>project_id</name>
        <rename>p1</rename>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>batch_next_date</name>
        <rename>p2</rename>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>392</xloc>
      <yloc>578</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>WBS情報取得</name>
    <type>TableInput</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>IPF_DB</connection>
    <sql>SELECT
  ticket_id
, parent_id
FROM wbs_ticket
WHERE project_id = ?
ORDER BY ticket_id ASC;
</sql>
    <limit>0</limit>
    <lookup>SQLパラメータ 4</lookup>
    <execute_each_row>Y</execute_each_row>
    <variables_active>Y</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>537</xloc>
      <yloc>701</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>WBS親子マージ</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<join_type>INNER</join_type>
<step1>ソート</step1>
<step2>do nothing 11</step2>
    <keys_1>
      <key>ticket_id</key>
    </keys_1>
    <keys_2>
      <key>ticket_id</key>
    </keys_2>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1788</xloc>
      <yloc>1064</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>WBS親子マージ 2</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<join_type>INNER</join_type>
<step1>ソート 4</step1>
<step2>do nothing 16</step2>
    <keys_1>
      <key>ticket_id</key>
    </keys_1>
    <keys_2>
      <key>ticket_id</key>
    </keys_2>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1796</xloc>
      <yloc>1330</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>WBS親子マージ 3</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<join_type>INNER</join_type>
<step1>ソート 12</step1>
<step2>do nothing 15</step2>
    <keys_1>
      <key>ticket_id</key>
    </keys_1>
    <keys_2>
      <key>ticket_id</key>
    </keys_2>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1806</xloc>
      <yloc>1589</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>WBS親子マージ 4</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<join_type>INNER</join_type>
<step1>ソート 16</step1>
<step2>do nothing 17</step2>
    <keys_1>
      <key>ticket_id</key>
    </keys_1>
    <keys_2>
      <key>ticket_id</key>
    </keys_2>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1804</xloc>
      <yloc>1831</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>WBS親子関係</name>
    <type>ClosureGenerator</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <parent_id_field>parent_id</parent_id_field>
    <child_id_field>ticket_id</child_id_field>
    <distance_field>level</distance_field>
    <is_root_zero>Y</is_root_zero>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>682</xloc>
      <yloc>697</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>WBS開始日・終了日取得</name>
    <type>TableInput</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>IPF_DB</connection>
    <sql>SELECT
  cast(? as Date) as batch_date
, project_id
, ticket_id as ticket_id_wbs
, subject
, parent_id
, planned_start_date as wbs_start_date
, planned_end_date as wbs_end_date
, planned_cost
, planned_sloc
FROM wbs_ticket
WHERE project_id = ?
ORDER BY ticket_id_wbs ASC;
</sql>
    <limit>0</limit>
    <lookup>SQLパラメータ 5</lookup>
    <execute_each_row>Y</execute_each_row>
    <variables_active>Y</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>574</xloc>
      <yloc>382</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>do nothing</name>
    <type>Dummy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>2483</xloc>
      <yloc>917</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>do nothing 10</name>
    <type>Dummy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1068</xloc>
      <yloc>415</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>do nothing 11</name>
    <type>Dummy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1692</xloc>
      <yloc>990</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>do nothing 13</name>
    <type>Dummy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>262</xloc>
      <yloc>700</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>do nothing 14</name>
    <type>Dummy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>148</xloc>
      <yloc>1068</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>do nothing 15</name>
    <type>Dummy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1701</xloc>
      <yloc>1493</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>do nothing 16</name>
    <type>Dummy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1694</xloc>
      <yloc>1232</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>do nothing 17</name>
    <type>Dummy</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1706</xloc>
      <yloc>1740</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>do nothing 18</name>
    <type>Dummy</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>2495</xloc>
      <yloc>1998</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>do nothing 19</name>
    <type>Dummy</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>156</xloc>
      <yloc>1985</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>do nothing 2</name>
    <type>Dummy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>144</xloc>
      <yloc>918</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>do nothing 20</name>
    <type>Dummy</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>154</xloc>
      <yloc>2167</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>do nothing 3</name>
    <type>Dummy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>263</xloc>
      <yloc>484</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>do nothing 4</name>
    <type>Dummy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>269</xloc>
      <yloc>1215</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>do nothing 5</name>
    <type>Dummy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>156</xloc>
      <yloc>1338</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>do nothing 6</name>
    <type>Dummy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>269</xloc>
      <yloc>1468</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>do nothing 7</name>
    <type>Dummy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>158</xloc>
      <yloc>1584</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>do nothing 8</name>
    <type>Dummy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>270</xloc>
      <yloc>1706</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>do nothing 9</name>
    <type>Dummy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>156</xloc>
      <yloc>1827</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>r_s04_m_mart</name>
    <type>TableOutput</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>IPF_DB</connection>
    <schema>${GRAPH_DB_SCHEMA}</schema>
    <table>r_s04_m_mart</table>
    <commit>10000</commit>
    <truncate>N</truncate>
    <ignore_errors>N</ignore_errors>
    <use_batch>Y</use_batch>
    <specify_fields>Y</specify_fields>
    <partitioning_enabled>N</partitioning_enabled>
    <partitioning_field/>
    <partitioning_daily>N</partitioning_daily>
    <partitioning_monthly>Y</partitioning_monthly>
    <tablename_in_field>N</tablename_in_field>
    <tablename_field/>
    <tablename_in_table>Y</tablename_in_table>
    <return_keys>N</return_keys>
    <return_field/>
    <fields>
        <field>
          <column_name>ticket_id</column_name>
          <stream_name>ticket_id</stream_name>
        </field>
        <field>
          <column_name>project_id</column_name>
          <stream_name>project_id</stream_name>
        </field>
        <field>
          <column_name>subject</column_name>
          <stream_name>subject</stream_name>
        </field>
        <field>
          <column_name>planned_value</column_name>
          <stream_name>planned_value_graph</stream_name>
        </field>
        <field>
          <column_name>actual_cost</column_name>
          <stream_name>actual_cost_graph</stream_name>
        </field>
        <field>
          <column_name>earned_value_wbs</column_name>
          <stream_name>earned_value_wbs_graph</stream_name>
        </field>
        <field>
          <column_name>earned_value_sloc</column_name>
          <stream_name>earned_value_sloc_graph</stream_name>
        </field>
        <field>
          <column_name>eac_wbs_continue</column_name>
          <stream_name>eac_wbs_continue_graph</stream_name>
        </field>
        <field>
          <column_name>eac_wbs_special</column_name>
          <stream_name>eac_wbs_special_graph</stream_name>
        </field>
        <field>
          <column_name>eac_sloc_continue</column_name>
          <stream_name>eac_sloc_continue_graph</stream_name>
        </field>
        <field>
          <column_name>eac_sloc_special</column_name>
          <stream_name>eac_sloc_special_graph</stream_name>
        </field>
        <field>
          <column_name>estimate_wbs_continue</column_name>
          <stream_name>estimate_wbs_continue_graph</stream_name>
        </field>
        <field>
          <column_name>estimate_wbs_special</column_name>
          <stream_name>estimate_wbs_special_graph</stream_name>
        </field>
        <field>
          <column_name>estimate_sloc_continue</column_name>
          <stream_name>estimate_sloc_continue_graph</stream_name>
        </field>
        <field>
          <column_name>estimate_sloc_special</column_name>
          <stream_name>estimate_sloc_special_graph</stream_name>
        </field>
        <field>
          <column_name>thedate</column_name>
          <stream_name>month_label_date</stream_name>
        </field>
        <field>
          <column_name>parent_id</column_name>
          <stream_name>parent_id</stream_name>
        </field>
        <field>
          <column_name>terminal_flg</column_name>
          <stream_name>terminal_flg</stream_name>
        </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>2625</xloc>
      <yloc>2189</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ticket_idマージ</name>
    <type>Calculator</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <calculation><field_name>ticket_id_1</field_name>
<calc_type>NVL</calc_type>
<field_a>ticket_id_wbs</field_a>
<field_b>ticket_id_work</field_b>
<field_c/>
<value_type>Integer</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<remove>N</remove>
<conversion_mask/>
<decimal_symbol/>
<grouping_symbol/>
<currency_symbol/>
</calculation>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>817</xloc>
      <yloc>480</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ticket_idマージ 2</name>
    <type>Calculator</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
       <calculation><field_name>ticket_id</field_name>
<calc_type>NVL</calc_type>
<field_a>ticket_id_1</field_a>
<field_b>ticket_id_prog</field_b>
<field_c/>
<value_type>Integer</value_type>
<value_length>-1</value_length>
<value_precision>-1</value_precision>
<remove>N</remove>
<conversion_mask/>
<decimal_symbol/>
<grouping_symbol/>
<currency_symbol/>
</calculation>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1144</xloc>
      <yloc>578</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>スケジュール遅延工数算出（継続）</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <compatible>N</compatible>
    <jsScripts>      <jsScript>        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>&#47;&#47;Script here

var in_month_label_date     = month_label_date;
var in_month_label_end_date = month_label_end_date;

var in_wbs_end_date        = wbs_end_date;

var in_est_complete_date_wbs  = est_complete_date_wbs;
var in_est_complete_date_sloc = est_complete_date_sloc;

var in_remain_days_wbs  = remain_days_wbs;
var in_remain_days_sloc = remain_days_sloc;
var in_remain_cost_wbs  = remain_cost_wbs_continue;
var in_remain_cost_sloc = remain_cost_sloc_continue;

var in_estimate_wbs_continue  = estimate_wbs_continue;
var in_estimate_sloc_continue = estimate_sloc_continue;

var in_eac_wbs_continue  = eac_wbs_continue;
var in_eac_sloc_continue = eac_sloc_continue;


&#47;&#47; スケジュール遅延工数（累積）（WBS進捗：継続）
var est_wbs_continue_delay_delta  = null;
&#47;&#47; スケジュール遅延工数（累積）（ソース規模：継続）
var est_sloc_continue_delay_delta = null;

&#47;&#47; 工数予測値（WBS進捗・継続）(スケジュール遅延分）
var estimate_wbs_continue_delay  = null;
&#47;&#47; 工数予測値（ソース規模・継続）（スケジュール遅延分）
var estimate_sloc_continue_delay = null;

if (dateDiff(in_wbs_end_date, in_month_label_end_date, &quot;d&quot;) &gt;= 0) {
	&#47;&#47; WBS終了日　&lt;= 月ラベル最終日　→　WBS期間の最終月

	&#47;&#47; スケジュール遅延工数集計日数（累積）（WBS進捗・継続）
	var calc_delay_days_sum_wbs  = getCalcDelayDaysSum(in_month_label_date, in_wbs_end_date, in_est_complete_date_wbs,  in_remain_days_wbs);
	if (calc_delay_days_sum_wbs != null) {
		est_wbs_continue_delay_delta = in_remain_cost_wbs * (calc_delay_days_sum_wbs &#47; in_remain_days_wbs);
	}

	&#47;&#47; スケジュール遅延工数集計日数（累積）（ソース規模・継続）
	var calc_delay_days_sum_sloc = getCalcDelayDaysSum(in_month_label_date, in_wbs_end_date, in_est_complete_date_sloc, in_remain_days_sloc);
	if (calc_delay_days_sum_sloc != null) {
		est_sloc_continue_delay_delta = in_remain_cost_sloc * (calc_delay_days_sum_sloc &#47; in_remain_days_sloc);
	}
}

if (in_estimate_wbs_continue != null) {
	&#47;&#47; 工数予測値（WBS進捗・継続） の値が存在する場合
	&#47;&#47; 工数予測値（WBS進捗・継続）（スケジュール遅延分） = 工数予測値（WBS進捗・継続） + スケジュール遅延工数（累積）（WBS進捗：継続）
	estimate_wbs_continue_delay = in_estimate_wbs_continue + est_wbs_continue_delay_delta;
}

if (in_estimate_sloc_continue != null) {
	&#47;&#47; 工数予測値（ソース規模・継続） の値が存在する場合
	&#47;&#47; 工数予測値（ソース規模・継続）（スケジュール遅延分） = 工数予測値（ソース規模・継続） + スケジュール遅延工数（累積）（ソース規模：継続）
	estimate_sloc_continue_delay = in_estimate_sloc_continue + est_sloc_continue_delay_delta;
}

&#47;&#47; 残予測工数（WBS進捗：継続）（スケジュール遅延分）
var remain_cost_wbs_continue_delay  = in_eac_wbs_continue  - estimate_wbs_continue_delay;
&#47;&#47; 残予測工数（ソース規模：継続）（スケジュール遅延分）
var remain_cost_sloc_continue_delay = in_eac_sloc_continue - estimate_sloc_continue_delay;


&#47;&#47; -------------------------------------------------
&#47;&#47; スケジュール遅延工数集計日数（累積）を算出する
&#47;&#47;
&#47;&#47; month_label_date      月ラベル開始日
&#47;&#47; wbs_end_date         WBS終了日
&#47;&#47; remain_days          残期間
&#47;&#47; est_complete_date    予測完了日
&#47;&#47; -------------------------------------------------
function getCalcDelayDaysSum(month_label_date, wbs_end_date, est_complete_date, remain_days) {
	var clac_delay_days_sum = null;
	if (remain_days &gt; 0) {
		&#47;&#47; スケジュール遅延で残期間がある場合 → 集計日数を算出する
		
		&#47;&#47; 集計開始日 ＝ WBS終了日の次の日
		var wbs_end_next_date = dateAdd(wbs_end_date, &quot;d&quot;, 1);
		&#47;&#47; 集計終了日 ＝ 予測完了日、または月ラベル終了日のどちらか小さいほう
		var calc_end_date     = minDate(est_complete_date, month_label_end_date);

		if (dateDiff(wbs_end_next_date, calc_end_date, &quot;d&quot;) &gt;= 0) {
			&#47;&#47; 集計開始日 &lt;= 集計終了日 の場合
			&#47;&#47; 集計日数 ＝ WBS終了日 から 集計終了日 の日数
			clac_delay_days_sum = dateDiff(wbs_end_next_date, calc_end_date, &quot;d&quot;) + 1;
		}
	}
	return clac_delay_days_sum;
}


function maxDate(date_a, date_b) {
	var max_date = null;
	if (date_a != null &amp;&amp; date_b != null) {
		&#47;&#47; 日付A、日付B の両方が存在する場合
		if (dateDiff(date_a, date_b, &quot;d&quot;) &gt;= 0) {
			&#47;&#47; 日付A &lt;= 日付B
			max_date = date_b;
		} else {
			&#47;&#47; 日付A &gt; 日付B
			max_date = date_a;
		}

	} else if (date_a != null) {
		&#47;&#47; 日付Aのみ存在する場合
		max_date = date_a;

	} else if (date_b != null) {
		&#47;&#47; 日付Bのみ存在する場合
		max_date = date_b;
	}
	return max_date;
}

function minDate(date_a, date_b) {
	var min_date = null;
	if (date_a != null &amp;&amp; date_b != null) {
		&#47;&#47; 日付A、日付B の両方が存在する場合
		if (dateDiff(date_a, date_b, &quot;d&quot;) &gt;= 0) {
			&#47;&#47; 日付A &lt;= 日付B
			min_date = date_a;
		} else {
			&#47;&#47; 日付A &gt; 日付B
			min_date = date_b;
		}

	} else if (date_a != null) {
		&#47;&#47; 日付Aのみ存在する場合
		min_date = date_a;

	} else if (date_b != null) {
		&#47;&#47; 日付Bのみ存在する場合
		min_date = date_b;
	}
	return min_date;
}

</jsScript_script>
      </jsScript>    </jsScripts>    <fields>      <field>        <name>est_wbs_continue_delay_delta</name>
        <rename>est_wbs_continue_delay_delta</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>estimate_wbs_continue_delay</name>
        <rename>estimate_wbs_continue_delay</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>est_sloc_continue_delay_delta</name>
        <rename>est_sloc_continue_delay_delta</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>estimate_sloc_continue_delay</name>
        <rename>estimate_sloc_continue_delay</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>remain_cost_wbs_continue_delay</name>
        <rename>remain_cost_wbs_continue_delay</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>remain_cost_sloc_continue_delay</name>
        <rename>remain_cost_sloc_continue_delay</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>983</xloc>
      <yloc>2176</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ソース規模マージ</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<join_type>LEFT OUTER</join_type>
<step1>ソート 15</step1>
<step2>ソース規模（集計）</step2>
    <keys_1>
      <key>month_label_date</key>
      <key>ticket_id</key>
    </keys_1>
    <keys_2>
      <key>month_label_date</key>
      <key>ticket_id</key>
    </keys_2>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1142</xloc>
      <yloc>1829</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ソース規模取得</name>
    <type>TableInput</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>IPF_DB</connection>
    <sql>SELECT
  ticket_id as ticket_id_sloc
, change_date
, file_path
, file_name
, source_lines2
FROM source_scale
WHERE project_id = cast(? as text)
  AND change_date &lt; cast(? as date)
  AND ticket_id &lt;&gt; 0
ORDER BY ticket_id_sloc ASC, change_date ASC</sql>
    <limit>0</limit>
    <lookup>SQLパラメータ</lookup>
    <execute_each_row>Y</execute_each_row>
    <variables_active>Y</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>498</xloc>
      <yloc>1709</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ソース規模情報検索</name>
    <type>StreamLookup</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <from>集計 4</from>
    <input_sorted>N</input_sorted>
    <preserve_memory>N</preserve_memory>
    <sorted_list>N</sorted_list>
    <integer_pair>N</integer_pair>
    <lookup>
      <key>
        <name>month_num</name>
        <field>month_num</field>
      </key>
      <key>
        <name>ticket_id</name>
        <field>ticket_id</field>
      </key>
      <value>
        <name>earned_value_sloc</name>
        <rename>earned_value_sloc</rename>
        <default/>
        <type>-</type>
      </value>
    </lookup>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>2494</xloc>
      <yloc>1832</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ソース規模（最新）</name>
    <type>GroupBy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <all_rows>N</all_rows>
      <ignore_aggregate>N</ignore_aggregate>
      <field_ignore/>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>grp</prefix>
      <add_linenr>N</add_linenr>
      <linenr_fieldname/>
      <give_back_row>N</give_back_row>
      <group>
        <field>
          <name>month_label_date</name>
        </field>
        <field>
          <name>ticket_id</name>
        </field>
        <field>
          <name>file_path</name>
        </field>
        <field>
          <name>file_name</name>
        </field>
      </group>
      <fields>
        <field>
          <aggregate>source_lines2</aggregate>
          <subject>source_lines2</subject>
          <type>LAST_INCL_NULL</type>
          <valuefield/>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1038</xloc>
      <yloc>1707</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ソース規模（集計）</name>
    <type>GroupBy</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <all_rows>N</all_rows>
      <ignore_aggregate>N</ignore_aggregate>
      <field_ignore/>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>grp</prefix>
      <add_linenr>N</add_linenr>
      <linenr_fieldname/>
      <give_back_row>N</give_back_row>
      <group>
        <field>
          <name>month_label_date</name>
        </field>
        <field>
          <name>ticket_id</name>
        </field>
      </group>
      <fields>
        <field>
          <aggregate>source_lines2</aggregate>
          <subject>source_lines2</subject>
          <type>SUM</type>
          <valuefield/>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1094</xloc>
      <yloc>1767</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ソート</name>
    <type>SortRows</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>out</prefix>
      <sort_size>1000000</sort_size>
      <free_memory/>
      <compress>N</compress>
      <compress_variable/>
      <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>ticket_id</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1470</xloc>
      <yloc>1068</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ソート 11</name>
    <type>SortRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>out</prefix>
      <sort_size>1000000</sort_size>
      <free_memory/>
      <compress>N</compress>
      <compress_variable/>
      <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>month_label_date</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>ticket_id</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>992</xloc>
      <yloc>1583</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ソート 12</name>
    <type>SortRows</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>out</prefix>
      <sort_size>1000000</sort_size>
      <free_memory/>
      <compress>N</compress>
      <compress_variable/>
      <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>ticket_id</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1526</xloc>
      <yloc>1587</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ソート 13</name>
    <type>SortRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>out</prefix>
      <sort_size>1000000</sort_size>
      <free_memory/>
      <compress>N</compress>
      <compress_variable/>
      <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>month_num</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>month_label_date</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>ticket_id</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>child_id</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>2020</xloc>
      <yloc>1594</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ソート 14</name>
    <type>SortRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>out</prefix>
      <sort_size>1000000</sort_size>
      <free_memory/>
      <compress>N</compress>
      <compress_variable/>
      <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>month_label_date</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>ticket_id</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>file_path</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>file_name</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>change_date</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>928</xloc>
      <yloc>1704</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ソート 15</name>
    <type>SortRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>out</prefix>
      <sort_size>1000000</sort_size>
      <free_memory/>
      <compress>N</compress>
      <compress_variable/>
      <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>month_label_date</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>ticket_id</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1021</xloc>
      <yloc>1832</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ソート 16</name>
    <type>SortRows</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>out</prefix>
      <sort_size>1000000</sort_size>
      <free_memory/>
      <compress>N</compress>
      <compress_variable/>
      <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>ticket_id</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1668</xloc>
      <yloc>1829</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ソート 18</name>
    <type>SortRows</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>out</prefix>
      <sort_size>1000000</sort_size>
      <free_memory/>
      <compress>N</compress>
      <compress_variable/>
      <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>ticket_id_sloc</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>change_date</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>603</xloc>
      <yloc>1710</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ソート 19</name>
    <type>SortRows</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>out</prefix>
      <sort_size>1000000</sort_size>
      <free_memory/>
      <compress>N</compress>
      <compress_variable/>
      <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>ticket_id_prog</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>thedate</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>631</xloc>
      <yloc>1475</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ソート 2</name>
    <type>SortRows</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>out</prefix>
      <sort_size>1000000</sort_size>
      <free_memory/>
      <compress>N</compress>
      <compress_variable/>
      <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>ticket_id</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1689</xloc>
      <yloc>699</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ソート 20</name>
    <type>SortRows</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>out</prefix>
      <sort_size>1000000</sort_size>
      <free_memory/>
      <compress>N</compress>
      <compress_variable/>
      <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>ticket_id_work</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>work_date</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>639</xloc>
      <yloc>1219</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ソート 21</name>
    <type>SortRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>out</prefix>
      <sort_size>1000000</sort_size>
      <free_memory/>
      <compress>N</compress>
      <compress_variable/>
      <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>month_num</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>month_label_date</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>ticket_id</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>child_id</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>2024</xloc>
      <yloc>1833</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ソート 22</name>
    <type>SortRows</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>out</prefix>
      <sort_size>1000000</sort_size>
      <free_memory/>
      <compress>N</compress>
      <compress_variable/>
      <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>month_num</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>month_label_date</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>ticket_id</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>2482</xloc>
      <yloc>996</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ソート 23</name>
    <type>SortRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>out</prefix>
      <sort_size>1000000</sort_size>
      <free_memory/>
      <compress>N</compress>
      <compress_variable/>
      <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>ticket_id</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>month_label_next_date</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>155</xloc>
      <yloc>1227</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ソート 24</name>
    <type>SortRows</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>out</prefix>
      <sort_size>1000000</sort_size>
      <free_memory/>
      <compress>N</compress>
      <compress_variable/>
      <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>ticket_id</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>month_num</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>month_label_date</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>623</xloc>
      <yloc>2167</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ソート 25</name>
    <type>SortRows</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>out</prefix>
      <sort_size>1000000</sort_size>
      <free_memory/>
      <compress>N</compress>
      <compress_variable/>
      <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>month_label_date</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>ticket_id</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1856</xloc>
      <yloc>2187</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ソート 26</name>
    <type>SortRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>out</prefix>
      <sort_size>1000000</sort_size>
      <free_memory/>
      <compress>N</compress>
      <compress_variable/>
      <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>ticket_id_lowest</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>843</xloc>
      <yloc>835</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ソート 27</name>
    <type>SortRows</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>out</prefix>
      <sort_size>1000000</sort_size>
      <free_memory/>
      <compress>N</compress>
      <compress_variable/>
      <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>ticket_id</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>month_num</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>month_label_date</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>866</xloc>
      <yloc>911</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ソート 28</name>
    <type>SortRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>out</prefix>
      <sort_size>1000000</sort_size>
      <free_memory/>
      <compress>N</compress>
      <compress_variable/>
      <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>parent_id</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>802</xloc>
      <yloc>756</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ソート 3</name>
    <type>SortRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>out</prefix>
      <sort_size>1000000</sort_size>
      <free_memory/>
      <compress>N</compress>
      <compress_variable/>
      <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>month_num</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>month_label_date</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>ticket_id</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>child_id</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>2019</xloc>
      <yloc>1066</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ソート 4</name>
    <type>SortRows</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>out</prefix>
      <sort_size>1000000</sort_size>
      <free_memory/>
      <compress>N</compress>
      <compress_variable/>
      <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>ticket_id</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1401</xloc>
      <yloc>1334</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ソート 6</name>
    <type>SortRows</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>out</prefix>
      <sort_size>1000000</sort_size>
      <free_memory/>
      <compress>N</compress>
      <compress_variable/>
      <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>month_num</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>month_label_date</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>ticket_id</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>child_id</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>2035</xloc>
      <yloc>1330</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ソート 7</name>
    <type>SortRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>out</prefix>
      <sort_size>1000000</sort_size>
      <free_memory/>
      <compress>N</compress>
      <compress_variable/>
      <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>month_label_date</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>ticket_id</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>work_date</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>work_time</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>949</xloc>
      <yloc>1222</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ソート 8</name>
    <type>SortRows</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>out</prefix>
      <sort_size>1000000</sort_size>
      <free_memory/>
      <compress>N</compress>
      <compress_variable/>
      <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>month_label_date</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>ticket_id</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1043</xloc>
      <yloc>1329</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>ソート 9</name>
    <type>SortRows</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>out</prefix>
      <sort_size>1000000</sort_size>
      <free_memory/>
      <compress>N</compress>
      <compress_variable/>
      <unique_rows>N</unique_rows>
    <fields>
      <field>
        <name>month_label_date</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>ticket_id</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
      <field>
        <name>thedate</name>
        <ascending>Y</ascending>
        <case_sensitive>N</case_sensitive>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>913</xloc>
      <yloc>1474</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>データ削除</name>
    <type>ExecSQL</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>IPF_DB</connection>
    <execute_each_row>N</execute_each_row>
    <single_statement>N</single_statement>
    <replace_variables>Y</replace_variables>
    <sql>DELETE FROM ${GRAPH_DB_SCHEMA}.r_s04_m_mart WHERE project_id = ${PROJECT_ID};
</sql>
    <insert_field/>
    <update_field/>
    <delete_field/>
    <read_field/>
    <arguments>
    </arguments>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>267</xloc>
      <yloc>112</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>バッチ日付の次の日算出</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <compatible>N</compatible>
    <jsScripts>      <jsScript>        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>
&#47;&#47; バッチ処理日の次の日
var batch_next_date = dateAdd(batch_date,&quot;d&quot;,1);
</jsScript_script>
      </jsScript>    </jsScripts>    <fields>      <field>        <name>batch_next_date</name>
        <rename>batch_next_date</rename>
        <type>Date</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>265</xloc>
      <yloc>318</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>バッチ日付入力</name>
    <type>TextFileInput</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <accept_filenames>N</accept_filenames>
    <passing_through_fields>N</passing_through_fields>
    <accept_field/>
    <accept_stepname/>
    <separator>;</separator>
    <enclosure>&quot;</enclosure>
    <enclosure_breaks>N</enclosure_breaks>
    <escapechar/>
    <header>N</header>
    <nr_headerlines>1</nr_headerlines>
    <footer>N</footer>
    <nr_footerlines>1</nr_footerlines>
    <line_wrapped>N</line_wrapped>
    <nr_wraps>1</nr_wraps>
    <layout_paged>N</layout_paged>
    <nr_lines_per_page>80</nr_lines_per_page>
    <nr_lines_doc_header>0</nr_lines_doc_header>
    <noempty>Y</noempty>
    <include>N</include>
    <include_field/>
    <rownum>N</rownum>
    <rownumByFile>N</rownumByFile>
    <rownum_field/>
    <format>mixed</format>
    <encoding/>
    <add_to_result_filenames>Y</add_to_result_filenames>
    <file>
      <name>${BATCH_DATE_FILE}</name>
      <filemask/>
      <exclude_filemask/>
      <file_required>N</file_required>
      <include_subfolders>N</include_subfolders>
      <type>CSV</type>
      <compression>None</compression>
    </file>
    <filters>
    </filters>
    <fields>
      <field>
        <name>batch_date</name>
        <type>Date</type>
        <format>yyyy&#47;MM&#47;dd</format>
        <currency/>
        <decimal/>
        <group/>
        <nullif/>
        <ifnull/>
        <position>-1</position>
        <length>-1</length>
        <precision>-1</precision>
        <trim_type>none</trim_type>
        <repeat>N</repeat>
      </field>
    </fields>
    <limit>1</limit>
    <error_ignored>N</error_ignored>
    <error_line_skipped>N</error_line_skipped>
    <error_count_field/>
    <error_fields_field/>
    <error_text_field/>
    <bad_line_files_destination_directory/>
    <bad_line_files_extension>warning</bad_line_files_extension>
    <error_line_files_destination_directory/>
    <error_line_files_extension>error</error_line_files_extension>
    <line_number_files_destination_directory/>
    <line_number_files_extension>line</line_number_files_extension>
    <date_format_lenient>Y</date_format_lenient>
    <date_format_locale>ja_JP</date_format_locale>
    <shortFileFieldName/>
    <pathFieldName/>
    <hiddenFieldName/>
    <lastModificationTimeFieldName/>
    <uriNameFieldName/>
    <rootUriNameFieldName/>
    <extensionFieldName/>
    <sizeFieldName/>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>92</xloc>
      <yloc>126</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>フィールド選択 5</name>
    <type>SelectValues</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>month_num</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>month_label_date</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>ticket_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>month_label_next_date</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>planned_cost</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>planned_sloc</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>598</xloc>
      <yloc>1827</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>プロジェクトID取得</name>
    <type>GetVariable</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>
      <field>
        <name>project_id</name>
        <variable>${PROJECT_ID}</variable>
        <type>Integer</type>
        <format/>
        <currency/>
        <decimal/>
        <group/>
        <length>0</length>
        <precision>0</precision>
        <trim_type>none</trim_type>
      </field>
    </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>94</xloc>
      <yloc>214</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>レベル最大値取得</name>
    <type>GroupBy</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <all_rows>N</all_rows>
      <ignore_aggregate>N</ignore_aggregate>
      <field_ignore/>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>grp</prefix>
      <add_linenr>N</add_linenr>
      <linenr_fieldname/>
      <give_back_row>N</give_back_row>
      <group>
        <field>
          <name>parent_id</name>
        </field>
      </group>
      <fields>
        <field>
          <aggregate>level</aggregate>
          <subject>level</subject>
          <type>MAX</type>
          <valuefield/>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>912</xloc>
      <yloc>755</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>不要レコード削除</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<send_true_to/>
<send_false_to/>
    <compare>
<condition>
 <negated>N</negated>
 <conditions>
  <condition>
   <negated>N</negated>
   <leftvalue>planned_value</leftvalue>
   <function>&gt;</function>
   <rightvalue/>
   <value><name>constant</name><type>Number</type><text>0.0</text><length>-1</length><precision>-1</precision><isnull>N</isnull><mask>#.#</mask></value>   </condition>
  <condition>
   <negated>N</negated>
   <operator>OR</operator>
   <leftvalue>actual_cost</leftvalue>
   <function>&gt;</function>
   <rightvalue/>
   <value><name>constant</name><type>Number</type><text>0.0</text><length>-1</length><precision>-1</precision><isnull>N</isnull><mask>#.#</mask></value>   </condition>
  </conditions>
 </condition>
    </compare>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>2114</xloc>
      <yloc>2183</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>不要レコード削除 2</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<send_true_to/>
<send_false_to/>
    <compare>
<condition>
 <negated>N</negated>
 <conditions>
  <condition>
   <negated>N</negated>
   <leftvalue>month_label_date</leftvalue>
   <function>&lt;=</function>
   <rightvalue>est_complete_date</rightvalue>
   </condition>
  <condition>
   <negated>N</negated>
   <operator>OR</operator>
   <leftvalue>month_label_date</leftvalue>
   <function>&lt;=</function>
   <rightvalue>wbs_end_date</rightvalue>
   </condition>
  <condition>
   <negated>N</negated>
   <operator>OR</operator>
   <leftvalue>month_label_date</leftvalue>
   <function>&lt;=</function>
   <rightvalue>work_end_date</rightvalue>
   </condition>
  <condition>
   <negated>N</negated>
   <operator>OR</operator>
   <leftvalue>month_label_date</leftvalue>
   <function>&lt;=</function>
   <rightvalue>prog_end_date</rightvalue>
   </condition>
  </conditions>
 </condition>
    </compare>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1973</xloc>
      <yloc>2186</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>不要列削除 10</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>        <select_unspecified>N</select_unspecified>
      <remove>        <name>ticket_id_lowest</name>
      </remove>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>563</xloc>
      <yloc>912</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>不要列削除 2</name>
    <type>SelectValues</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>        <select_unspecified>N</select_unspecified>
      <remove>        <name>ticket_id_1</name>
      </remove>      <remove>        <name>ticket_id_prog</name>
      </remove>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1272</xloc>
      <yloc>578</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>不要列削除 3</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>        <select_unspecified>N</select_unspecified>
      <remove>        <name>ticket_id_wbs</name>
      </remove>      <remove>        <name>ticket_id_work</name>
      </remove>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>938</xloc>
      <yloc>484</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>不要列削除 4</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>        <select_unspecified>N</select_unspecified>
      <remove>        <name>batch_date</name>
      </remove>      <remove>        <name>month_num</name>
      </remove>      <remove>        <name>month_count</name>
      </remove>      <remove>        <name>month_label_end_date</name>
      </remove>      <remove>        <name>month_label_next_date</name>
      </remove>      <remove>        <name>month_label_prev_date</name>
      </remove>      <remove>        <name>estimate_wbs_continue_tmp</name>
      </remove>      <remove>        <name>estimate_sloc_continue_tmp</name>
      </remove>      <remove>        <name>est_complete_date_wbs</name>
      </remove>      <remove>        <name>est_complete_date_sloc</name>
      </remove>      <remove>        <name>planned_value_delta</name>
      </remove>      <remove>        <name>planned_month_value</name>
      </remove>      <remove>        <name>remain_cost_sloc_continue</name>
      </remove>      <remove>        <name>remain_cost_wbs_continue</name>
      </remove>      <remove>        <name>remain_days_sloc</name>
      </remove>      <remove>        <name>remain_days_wbs</name>
      </remove>      <remove>        <name>wbs_start_date</name>
      </remove>      <remove>        <name>wbs_progress</name>
      </remove>      <remove>        <name>planned_cost</name>
      </remove>      <remove>        <name>planned_sloc</name>
      </remove>      <remove>        <name>planned_value_last</name>
      </remove>      <remove>        <name>cpi_sloc</name>
      </remove>      <remove>        <name>cpi_wbs</name>
      </remove>      <remove>        <name>spi_sloc</name>
      </remove>      <remove>        <name>spi_wbs</name>
      </remove>      <remove>        <name>first_start_date</name>
      </remove>      <remove>        <name>last_end_date</name>
      </remove>      <remove>        <name>month_first_date</name>
      </remove>      <remove>        <name>month_last_date</name>
      </remove>      <remove>        <name>est_wbs_continue_delta</name>
      </remove>      <remove>        <name>est_wbs_special_delta</name>
      </remove>      <remove>        <name>est_sloc_continue_delta</name>
      </remove>      <remove>        <name>est_sloc_special_delta</name>
      </remove>      <remove>        <name>prev_est_sloc_continue_graph</name>
      </remove>      <remove>        <name>prev_est_sloc_special_graph</name>
      </remove>      <remove>        <name>prev_est_wbs_continue_graph</name>
      </remove>      <remove>        <name>prev_est_wbs_special_graph</name>
      </remove>      <remove>        <name>prev_est_sloc_continue</name>
      </remove>      <remove>        <name>prev_est_sloc_special</name>
      </remove>      <remove>        <name>prev_est_wbs_continue</name>
      </remove>      <remove>        <name>prev_est_wbs_special</name>
      </remove>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1753</xloc>
      <yloc>2184</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>不要列削除 7</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>        <select_unspecified>N</select_unspecified>
      <remove>        <name>planned_cost_1</name>
      </remove>      <remove>        <name>planned_sloc_1</name>
      </remove>      <remove>        <name>ticket_id_1</name>
      </remove>      <remove>        <name>month_num_1</name>
      </remove>      <remove>        <name>month_label_date_1</name>
      </remove>      <remove>        <name>level_max</name>
      </remove>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>2486</xloc>
      <yloc>1240</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>不要列削除 8</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>        <select_unspecified>N</select_unspecified>
      <remove>        <name>work_start_date</name>
      </remove>      <remove>        <name>work_end_date</name>
      </remove>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1862</xloc>
      <yloc>576</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>不要列削除 9</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>        <select_unspecified>N</select_unspecified>
      <remove>        <name>work_time</name>
      </remove>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>2490</xloc>
      <yloc>1514</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>不足月ラベル行追加</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <compatible>N</compatible>
    <jsScripts>      <jsScript>        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>&#47;&#47;Script here

var in_month_num   = str2num(month_num);
var in_month_count = str2num(month_count);

var in_month_label_date        = month_label_date;
var in_month_first_date        = month_first_date;
var in_month_last_date         = month_last_date;
var in_est_complete_date       = est_complete_date;

if (in_month_num == in_month_count) {
	&#47;&#47; 月ラベルの最終行の場合
	
	&#47;&#47; 月ラベルが予測完了日まであるか確認
	var diff_month_count = calcMonthDiff(in_month_last_date, in_est_complete_date);
	if (diff_month_count &gt; 0) {
		&#47;&#47; 月ラベルが足りない場合
		
		&#47;&#47; 無限ループ防止(1年)
		var max_month_count = (365 * 1) &#47; 30;
		if (diff_month_count &gt; max_month_count) {
			diff_month_count = max_month_count;
		}

		for (var i = 0; i &lt; diff_month_count; i++) {
			var new_month_num = in_month_count + 1 + i;
			var new_month_label_date      = dateAdd(month_first_date, &quot;m&quot;, new_month_num);
			var new_month_label_next_date = dateAdd(month_first_date, &quot;m&quot;, new_month_num + 1);
			var new_month_label_prev_date = dateAdd(month_first_date, &quot;m&quot;, new_month_num - 1);
			var new_month_label_end_date  = dateAdd(new_month_label_next_date, &quot;d&quot;, -1);

    		var newRow = createRowCopy(getOutputRowMeta().size());
			newRow[getInputRowMeta().indexOfValue(&quot;month_num&quot;)]             = new java.lang.Long(new_month_num);
			newRow[getInputRowMeta().indexOfValue(&quot;month_label_date&quot;)]      = new_month_label_date;
			newRow[getInputRowMeta().indexOfValue(&quot;month_label_next_date&quot;)] = new_month_label_next_date;
			newRow[getInputRowMeta().indexOfValue(&quot;month_label_prev_date&quot;)] = new_month_label_prev_date;
			newRow[getInputRowMeta().indexOfValue(&quot;month_label_end_date&quot;)]  = new_month_label_end_date;

			newRow[getInputRowMeta().indexOfValue(&quot;planned_value_graph&quot;)]  = null;
			newRow[getInputRowMeta().indexOfValue(&quot;actual_cost_graph&quot;)]  = null;
			newRow[getInputRowMeta().indexOfValue(&quot;earned_value_wbs_graph&quot;)]  = null;
			newRow[getInputRowMeta().indexOfValue(&quot;earned_value_sloc_graph&quot;)]  = null;

			newRow[getInputRowMeta().indexOfValue(&quot;planned_month_value&quot;)]   = new java.lang.Double(0);
			newRow[getInputRowMeta().indexOfValue(&quot;est_complete_date&quot;)]  = in_est_complete_date;

			putRow(newRow);
		}
		
	}
}

function maxDate(date_a, date_b) {
	var max_date = null;
	if (date_a != null &amp;&amp; date_b != null) {
		&#47;&#47; 日付A、日付B の両方が存在する場合
		if (dateDiff(date_a, date_b, &quot;d&quot;) &gt;= 0) {
			&#47;&#47; 日付A &lt;= 日付B
			max_date = date_b;
		} else {
			&#47;&#47; 日付A &gt; 日付B
			max_date = date_a;
		}

	} else if (date_a != null) {
		&#47;&#47; 日付Aのみ存在する場合
		max_date = date_a;

	} else if (date_b != null) {
		&#47;&#47; 日付Bのみ存在する場合
		max_date = date_b;
	}
	return max_date;
}

&#47;&#47; -------------------------------------------------
&#47;&#47; 月数を算出する
&#47;&#47;
&#47;&#47; start_date   開始日
&#47;&#47; end_date     終了日
&#47;&#47; -------------------------------------------------
function calcMonthDiff(start_date, end_date) {

	var end_next_date = dateAdd(end_date, &quot;d&quot;, 1);
	var month_diff = dateDiff(start_date, end_next_date, &quot;m&quot;);
	
	var start_day_num = getDayNumber(start_date, &quot;m&quot;);
	var end_day_num   = getDayNumber(end_next_date, &quot;m&quot;);
	if (start_day_num &gt;= end_day_num) {
		month_diff = month_diff - 1;
	}
	return month_diff;
}

</jsScript_script>
      </jsScript>    </jsScripts>    <fields>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>488</xloc>
      <yloc>2168</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>作業記録マージ</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<join_type>LEFT OUTER</join_type>
<step1>ソート 8</step1>
<step2>作業記録（累計）</step2>
    <keys_1>
      <key>month_label_date</key>
      <key>ticket_id</key>
    </keys_1>
    <keys_2>
      <key>month_label_date</key>
      <key>ticket_id</key>
    </keys_2>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1147</xloc>
      <yloc>1332</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>作業記録取得</name>
    <type>TableInput</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>IPF_DB</connection>
    <sql>SELECT
  ticket_id as ticket_id_work
, work_date
, sum(work_time) as work_time
FROM work_record
WHERE project_id = ?
  AND work_date &lt; cast(? as date)
GROUP BY ticket_id, work_date
</sql>
    <limit>0</limit>
    <lookup>SQLパラメータ 3</lookup>
    <execute_each_row>Y</execute_each_row>
    <variables_active>Y</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>534</xloc>
      <yloc>1216</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>作業記録検索</name>
    <type>StreamLookup</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <from>集計 2</from>
    <input_sorted>N</input_sorted>
    <preserve_memory>N</preserve_memory>
    <sorted_list>N</sorted_list>
    <integer_pair>N</integer_pair>
    <lookup>
      <key>
        <name>month_num</name>
        <field>month_num</field>
      </key>
      <key>
        <name>ticket_id</name>
        <field>ticket_id</field>
      </key>
      <value>
        <name>work_time</name>
        <rename>work_time</rename>
        <default/>
        <type>Number</type>
      </value>
      <value>
        <name>work_end_date</name>
        <rename>work_end_date</rename>
        <default/>
        <type>Date</type>
      </value>
    </lookup>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>2490</xloc>
      <yloc>1326</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>作業記録開始日・終了日取得</name>
    <type>TableInput</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>IPF_DB</connection>
    <sql>SELECT
  ticket_id as ticket_id_work
, min(work_date) as work_start_date
, max(work_date) as work_end_date
FROM work_record
WHERE project_id = ?
  AND work_date &lt; cast(? as date)
GROUP BY ticket_id
ORDER BY ticket_id_work ASC</sql>
    <limit>0</limit>
    <lookup>SQLパラメータ 6</lookup>
    <execute_each_row>Y</execute_each_row>
    <variables_active>Y</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>580</xloc>
      <yloc>484</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>作業記録（累計）</name>
    <type>GroupBy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <all_rows>N</all_rows>
      <ignore_aggregate>N</ignore_aggregate>
      <field_ignore/>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>grp</prefix>
      <add_linenr>N</add_linenr>
      <linenr_fieldname/>
      <give_back_row>N</give_back_row>
      <group>
        <field>
          <name>month_label_date</name>
        </field>
        <field>
          <name>ticket_id</name>
        </field>
      </group>
      <fields>
        <field>
          <aggregate>work_time</aggregate>
          <subject>work_time</subject>
          <type>SUM</type>
          <valuefield/>
        </field>
        <field>
          <aggregate>work_end_date</aggregate>
          <subject>work_date</subject>
          <type>MAX</type>
          <valuefield/>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1043</xloc>
      <yloc>1220</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>列→行変換</name>
    <type>Normaliser</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
   <typefield>field_name</typefield>
    <fields>      <field>        <name>batch_date</name>
        <value>batch_date</value>
        <norm>end_date</norm>
        </field>      <field>        <name>prog_end_date</name>
        <value>prog_end_date</value>
        <norm>end_date</norm>
        </field>      <field>        <name>wbs_end_date</name>
        <value>wbs_end_date</value>
        <norm>end_date</norm>
        </field>      <field>        <name>work_end_date</name>
        <value>work_end_date</value>
        <norm>end_date</norm>
        </field>      </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1319</xloc>
      <yloc>416</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>列→行変換 2</name>
    <type>Normaliser</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
   <typefield>field_name</typefield>
    <fields>      <field>        <name>prog_start_date</name>
        <value>prog_start_date</value>
        <norm>start_date</norm>
        </field>      <field>        <name>wbs_start_date</name>
        <value>wbs_start_date</value>
        <norm>start_date</norm>
        </field>      <field>        <name>work_start_date</name>
        <value>work_start_date</value>
        <norm>start_date</norm>
        </field>      </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1326</xloc>
      <yloc>334</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>列名変更</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>parent_id</name>
        <rename>ticket_id_lowest</rename>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>966</xloc>
      <yloc>834</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>列名変更 2</name>
    <type>SelectValues</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>estimate_wbs_continue</name>
        <rename>estimate_wbs_continue_tmp</rename>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>estimate_sloc_continue</name>
        <rename>estimate_sloc_continue_tmp</rename>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>estimate_wbs_continue_delay</name>
        <rename>estimate_wbs_continue</rename>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>estimate_sloc_continue_delay</name>
        <rename>estimate_sloc_continue</rename>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>estimate_wbs_special</name>
        <rename>estimate_wbs_special_tmp</rename>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>estimate_wbs_special_delay</name>
        <rename>estimate_wbs_special</rename>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>estimate_sloc_special</name>
        <rename>estimate_sloc_special_tmp</rename>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>estimate_sloc_special_delay</name>
        <rename>estimate_sloc_special</rename>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>Y</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1448</xloc>
      <yloc>2184</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>列選択</name>
    <type>SelectValues</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>month_num</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>month_label_date</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>ticket_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>planned_cost</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>planned_sloc</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>planned_value</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>planned_value_last</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>planned_month_value</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1341</xloc>
      <yloc>1067</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>列選択 11</name>
    <type>SelectValues</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>month_num</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>month_label_date</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>parent_id</name>
        <rename>ticket_id</rename>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>ticket_id</name>
        <rename>child_id</rename>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>planned_cost</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>planned_sloc</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>planned_value</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>planned_value_last</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>planned_month_value</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>level</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1899</xloc>
      <yloc>1064</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>列選択 2</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>month_num</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>month_label_date</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>ticket_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>work_time</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>work_end_date</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1286</xloc>
      <yloc>1330</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>列選択 4</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>month_num</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>month_label_date</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>ticket_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>earned_value_wbs</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1435</xloc>
      <yloc>1584</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>列選択 5</name>
    <type>SelectValues</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>month_num</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>month_label_date</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>parent_id</name>
        <rename>ticket_id</rename>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>ticket_id</name>
        <rename>child_id</rename>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>work_time</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>work_end_date</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1931</xloc>
      <yloc>1330</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>列選択 6</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>month_num</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>month_label_date</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>parent_id</name>
        <rename>ticket_id</rename>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>ticket_id</name>
        <rename>child_id</rename>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>earned_value_wbs</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1917</xloc>
      <yloc>1594</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>列選択 7</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>month_num</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>month_label_date</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>ticket_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>earned_value_sloc</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1586</xloc>
      <yloc>1831</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>列選択 8</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>month_num</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>month_label_date</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>parent_id</name>
        <rename>ticket_id</rename>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>ticket_id</name>
        <rename>child_id</rename>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>earned_value_sloc</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1918</xloc>
      <yloc>1835</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>完成時予測工数算出</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <compatible>N</compatible>
    <jsScripts>      <jsScript>        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>&#47;&#47;Script here
var in_wbs_start_date       = wbs_start_date;
var in_wbs_end_date         = wbs_end_date;
var in_actual_cost          = actual_cost;
var in_actual_cost_graph    = actual_cost_graph;
var in_planned_value        = planned_value_last;
var in_planned_cost         = planned_cost;
var in_earned_value_wbs     = earned_value_wbs;
var in_earned_value_sloc    = earned_value_sloc;
var in_planned_month_value  = planned_month_value;
var in_month_label_end_date = month_label_end_date;
var in_batch_date           = batch_date;


&#47;&#47; CPI(Cost Performance Index):コスト効率
var cpi_wbs  = calcCPI(in_earned_value_wbs,  in_actual_cost);
var cpi_sloc = calcCPI(in_earned_value_sloc, in_actual_cost);

&#47;&#47; SPI(Schedule Performance Index):スケジュール効率
var spi_wbs  = calcSPI(in_earned_value_wbs,  in_planned_value);
var spi_sloc = calcSPI(in_earned_value_sloc, in_planned_value);

&#47;&#47; 進捗率（WBS）
var wbs_progress  = calcProgress(in_planned_cost, in_earned_value_wbs);
&#47;&#47; 進捗率（ソース規模）
var sloc_progress = calcProgress(in_planned_cost, in_earned_value_sloc);

&#47;&#47; 予測完了日（WBS）
var est_complete_date_wbs  = calcEstCompleteDate(in_wbs_start_date, in_wbs_end_date, spi_wbs);
if (dateDiff(est_complete_date_wbs, in_month_label_end_date, &quot;d&quot;) &gt;= 0) {
	&#47;&#47; 予測完了日 &lt;= 月ラベル最終日の場合
	if (wbs_progress &lt; 100) {
		&#47;&#47; 進捗率(WBS) &lt; 100 の場合
		&#47;&#47; 予測完了日 = 月ラベル最終日＋1月
		est_complete_date_wbs = dateAdd(in_month_label_end_date, &quot;m&quot;, 1);
	}
}

&#47;&#47; 予測完了日（ソース規模）
var est_complete_date_sloc = calcEstCompleteDate(in_wbs_start_date, in_wbs_end_date, spi_sloc);
if (dateDiff(est_complete_date_sloc, in_month_label_end_date, &quot;d&quot;) &gt;= 0) {
	&#47;&#47; 予測完了日 &lt;= 月ラベル最終日の場合
	if (wbs_progress &lt; 100) {
		&#47;&#47; 進捗率(WBS) &lt; 100 の場合
		&#47;&#47; 予測完了日 = 月ラベル最終日＋1月
		est_complete_date_sloc = dateAdd(in_month_label_end_date, &quot;m&quot;, 1);
	}
}

var est_complete_date = maxDate(est_complete_date_wbs, est_complete_date_sloc);

&#47;&#47; 残り日数
var remain_days_wbs  = dateDiff(in_wbs_end_date, est_complete_date_wbs,  &quot;d&quot;);
var remain_days_sloc = dateDiff(in_wbs_end_date, est_complete_date_sloc, &quot;d&quot;);


&#47;&#47; 完成時予測工数(WBS進捗：継続)
var eac_wbs_continue  = calcContinueEAC(wbs_progress,  in_planned_cost, in_actual_cost, in_earned_value_wbs,  cpi_wbs);
&#47;&#47; 完成時予測工数(WBS進捗：特別)
var eac_wbs_special   = calcSpecialEAC (wbs_progress,  in_planned_cost, in_actual_cost, in_earned_value_wbs);
&#47;&#47; 完成時予測工数(ソース規模：継続)
var eac_sloc_continue = calcContinueEAC(wbs_progress, in_planned_cost, in_actual_cost, in_earned_value_sloc, cpi_sloc);
&#47;&#47; 完成時予測工数(ソース規模：特別)
var eac_sloc_special  = calcSpecialEAC (wbs_progress, in_planned_cost, in_actual_cost, in_earned_value_sloc);

&#47;&#47; 完成時予測工数(WBS進捗：継続)（グラフ表示用）
var eac_wbs_continue_graph  = calcGraphEAC(eac_wbs_continue,  in_actual_cost_graph, in_batch_date, in_month_label_end_date, wbs_progress);
&#47;&#47; 完成時予測工数(WBS進捗：特別)（グラフ表示用）
var eac_wbs_special_graph   = calcGraphEAC(eac_wbs_special,   in_actual_cost_graph, in_batch_date, in_month_label_end_date, wbs_progress);
&#47;&#47; 完成時予測工数(ソース規模：継続)（グラフ表示用）
var eac_sloc_continue_graph = calcGraphEAC(eac_sloc_continue, in_actual_cost_graph, in_batch_date, in_month_label_end_date, sloc_progress);
&#47;&#47; 完成時予測工数(ソース規模：特別)（グラフ表示用）
var eac_sloc_special_graph  = calcGraphEAC(eac_sloc_special,  in_actual_cost_graph, in_batch_date, in_month_label_end_date, sloc_progress);

&#47;&#47; -------------------------------------------------
&#47;&#47; CPI(コスト効率) を算出する
&#47;&#47;
&#47;&#47; CPI(コスト効率) = EV(生産価値) ÷ AC(工数実績値)
&#47;&#47;
&#47;&#47; 実際に生み出した価値 (EV) を実際に発生したコスト (AC) で割るので、実際に生み出した価値と
&#47;&#47; 実際のコストが同じ場合、指標は 1 になります。したがって CPI は 1 を基準に評価します。
&#47;&#47; 1 より小さい指標の場合は、実際に生み出した価値に対してコストが多くかかってしまったことになります。
&#47;&#47; 1 より大きい値の場合は、少ないコストで価値を生み出せたことになります。
&#47;&#47;
&#47;&#47; コストが多くかかった ＜ 1 ＜ 少ないコストで済んだ
&#47;&#47;
&#47;&#47; earned_value  生産価値
&#47;&#47; actual_cost   工数実績値
&#47;&#47; -------------------------------------------------
function calcCPI(earned_value, actual_cost) {
	var cpi = 1;
	if (earned_value != null &amp;&amp; actual_cost != null) {
		if (actual_cost == 0) {
			cpi = 1;
		} else if (earned_value == 0) {
			cpi = 1;
		} else {
			cpi = earned_value &#47; actual_cost;
		}
	}
	return cpi;
}

&#47;&#47; -------------------------------------------------
&#47;&#47; SPI(スケジュール効率) を算出する
&#47;&#47;
&#47;&#47; SPI(スケジュール効率) = EV(生産価値) ÷ PV(工数計画値)
&#47;&#47;
&#47;&#47; SPIは、計画していた作業のうち、実際にはどこまで達成されたのかというスケジュールの効率を表す指標になります。
&#47;&#47; CPI 同様に 1 を基準に評価します。
&#47;&#47; 1 より小さい値の場合は、達成された作業 (成果物の完成度) が計画より遅れていることを表し、
&#47;&#47; 1 より大きい場合は、計画よりも作業 (成果物の完成度) が進んでいることになります。
&#47;&#47; 
&#47;&#47; 計画より遅れている ＜ 1 ＜ 計画より進んでいる
&#47;&#47;
&#47;&#47; earned_value   生産価値
&#47;&#47; planned_value  工数実績値
&#47;&#47; -------------------------------------------------
function calcSPI(earned_value, planned_value) {
	var spi = 1;
	if (earned_value != null &amp;&amp; planned_value != null) {
		if (planned_value == 0) {
			spi = 1;
		} else if (earned_value == 0) {
			spi = 0.1;
		} else {
			spi = earned_value &#47; planned_value;
		}
	}
	return spi;
}

&#47;&#47; -------------------------------------------------
&#47;&#47; 完成時予測工数(継続)を算出する
&#47;&#47; 現在の生産性の割合(コスト効率:CPI)が将来も継続した場合の完成時予測工数
&#47;&#47; 
&#47;&#47; EAC(完成時予測工数) = AC + (予定工数 - EV) ÷ CPI
&#47;&#47;
&#47;&#47; progress       進捗率
&#47;&#47; planned_cost   予定工数
&#47;&#47; actual_cost    工数実績値(AC)
&#47;&#47; earned_value   生産価値(EV)
&#47;&#47; -------------------------------------------------
function calcContinueEAC(progress, planned_cost, actual_cost, earned_value, cpi) {
	var continue_eac = null;
	if (planned_cost != null &amp;&amp; actual_cost != null &amp;&amp; earned_value != null) {
		if (progress &gt;= 100) {
			&#47;&#47; WBS進捗率が100%の場合、工数実績値をセット
			continue_eac = actual_cost;
		} else {	
			continue_eac = actual_cost + (planned_cost - earned_value) &#47; cpi;
		}
	}
	return continue_eac;
}

&#47;&#47; -------------------------------------------------
&#47;&#47; 完成時予測工数(特別)を算出する
&#47;&#47; 現在の生産性の割合(コスト効率:CPI)が特別なもので、今後同様の差異(コスト効率:CPI)
&#47;&#47; が発生しない場合の完成時予測工数
&#47;&#47;
&#47;&#47; EAC(完成時予測工数) = AC + (予定工数 - EV)
&#47;&#47;
&#47;&#47; progress       進捗率
&#47;&#47; planned_cost   予定工数
&#47;&#47; actual_cost    工数実績値
&#47;&#47; earned_value   生産価値
&#47;&#47; -------------------------------------------------
function calcSpecialEAC(progress, planned_cost, actual_cost, earned_value) {
	var special_eac = null;
	if (planned_cost != null &amp;&amp; actual_cost != null &amp;&amp; earned_value != null) {
		if (progress &gt;= 100) {
			&#47;&#47; WBS進捗率が100%の場合、工数実績値をセット
			special_eac = actual_cost;
		} else {	
			special_eac = actual_cost + (planned_cost - earned_value);
		}
	}
	return special_eac;
}


&#47;&#47; -------------------------------------------------
&#47;&#47; 進捗率を算出する
&#47;&#47; 
&#47;&#47; planned_cost  予定工数
&#47;&#47; earned_value  生産価値
&#47;&#47; -------------------------------------------------
function calcProgress(planned_cost, earned_value) {
	var progress = null;
	if (planned_cost != null &amp;&amp; planned_cost &gt; 0) {
		progress = (earned_value &#47; planned_cost) * 100;
	}
	return progress;
}


&#47;&#47; -------------------------------------------------
&#47;&#47; 予測完了日を算出する
&#47;&#47; 
&#47;&#47; 予測完了期間 = WBS期間 ÷ SPI（スケジュール効率）
&#47;&#47; 予測完了日 = WBS開始日 ＋ 予測完了期間
&#47;&#47; 
&#47;&#47; wbs_start_date  WBS開始日
&#47;&#47; wbs_end_date    WBS終了日
&#47;&#47; spi             SPI（スケジュール効率）
&#47;&#47; -------------------------------------------------
function calcEstCompleteDate(wbs_start_date, wbs_end_date, spi) {
	var wbs_interval = dateDiff(wbs_start_date, wbs_end_date, &quot;d&quot;) + 1;
	var est_complete_interval = wbs_interval &#47; spi;
	if (est_complete_interval &lt; 1) {
		est_complete_interval = 1;
	}
	var est_complete_date = dateAdd(wbs_start_date, &quot;d&quot;, (est_complete_interval - 1));
	return est_complete_date;
}

&#47;&#47; -------------------------------------------------
&#47;&#47; 完成時予測工数（グラフ表示用）を算出する
&#47;&#47; 
&#47;&#47; 実績がある場合は NULL
&#47;&#47; ただし、最新の実績がある週（=バッチ処理日の週）のみ完成時予測工数を設定
&#47;&#47; 
&#47;&#47; eac                  完成時予測工数
&#47;&#47; actual_cost_graph    工数実績値（グラフ表示用）
&#47;&#47; batch_date           バッチ処理日
&#47;&#47; month_label_end_date 月ラベル終了日
&#47;&#47; progress            進捗率
&#47;&#47; -------------------------------------------------
function calcGraphEAC(eac, actual_cost_graph, batch_date, month_label_end_date, progress) {
	var graph_eac = null;
	if (actual_cost_graph != null) {
		&#47;&#47; 実績がある場合
		if (progress &gt;= 100) {
			&#47;&#47; WBS進捗率が100%の場合、完成時予測工数をセット
			graph_eac = eac;
		} else if (dateDiff(batch_date, month_label_end_date, &quot;d&quot;) &gt;= 0) {
			&#47;&#47; ただし、最新の実績がある週（=バッチ処理日の週）のみ完成時予測工数を設定
			graph_eac = eac;
		} else {
			&#47;&#47; 実績がある場合は NULL
			graph_eac = null;
		}
	} else {
		&#47;&#47; 実績がない場合
		graph_eac = eac;
	}
	return graph_eac;
}


function maxDate(date_a, date_b) {
	var max_date = null;
	if (date_a != null &amp;&amp; date_b != null) {
		&#47;&#47; 日付A、日付B の両方が存在する場合
		if (dateDiff(date_a, date_b, &quot;d&quot;) &gt;= 0) {
			&#47;&#47; 日付A &lt;= 日付B
			max_date = date_b;
		} else {
			&#47;&#47; 日付A &gt; 日付B
			max_date = date_a;
		}

	} else if (date_a != null) {
		&#47;&#47; 日付Aのみ存在する場合
		max_date = date_a;

	} else if (date_b != null) {
		&#47;&#47; 日付Bのみ存在する場合
		max_date = date_b;
	}
	return max_date;
}
</jsScript_script>
      </jsScript>    </jsScripts>    <fields>      <field>        <name>cpi_wbs</name>
        <rename>cpi_wbs</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>cpi_sloc</name>
        <rename>cpi_sloc</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>spi_wbs</name>
        <rename>spi_wbs</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>spi_sloc</name>
        <rename>spi_sloc</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>eac_wbs_continue</name>
        <rename>eac_wbs_continue</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>eac_wbs_special</name>
        <rename>eac_wbs_special</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>eac_sloc_continue</name>
        <rename>eac_sloc_continue</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>eac_sloc_special</name>
        <rename>eac_sloc_special</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>est_complete_date_wbs</name>
        <rename>est_complete_date_wbs</rename>
        <type>Date</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>est_complete_date_sloc</name>
        <rename>est_complete_date_sloc</rename>
        <type>Date</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>est_complete_date</name>
        <rename>est_complete_date</rename>
        <type>Date</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>remain_days_wbs</name>
        <rename>remain_days_wbs</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>remain_days_sloc</name>
        <rename>remain_days_sloc</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>wbs_progress</name>
        <rename>wbs_progress</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>sloc_progress</name>
        <rename>sloc_progress</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>eac_wbs_continue_graph</name>
        <rename>eac_wbs_continue_graph</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>eac_wbs_special_graph</name>
        <rename>eac_wbs_special_graph</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>eac_sloc_continue_graph</name>
        <rename>eac_sloc_continue_graph</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>eac_sloc_special_graph</name>
        <rename>eac_sloc_special_graph</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>308</xloc>
      <yloc>2170</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>工数予測値グラフ表示</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <compatible>N</compatible>
    <jsScripts>      <jsScript>        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>&#47;&#47;Script here

var in_month_label_date     = month_label_date;

var in_wbs_end_date           = wbs_end_date;
var in_est_complete_date_wbs  = est_complete_date_wbs;
var in_est_complete_date_sloc = est_complete_date_sloc;

var in_estimate_wbs_continue  = estimate_wbs_continue;
var in_estimate_wbs_special   = estimate_wbs_special;
var in_estimate_sloc_continue = estimate_sloc_continue;
var in_estimate_sloc_special  = estimate_sloc_special;

var in_eac_wbs_continue  = eac_wbs_continue;
var in_eac_wbs_special   = eac_wbs_special;
var in_eac_sloc_continue = eac_sloc_continue;
var in_eac_sloc_special  = eac_sloc_special;

var old_ticket_id;
var old_est_wbs_continue;
var old_est_wbs_special;
var old_est_sloc_continue;
var old_est_sloc_special;

&#47;&#47;-----------------------
&#47;&#47; 前レコードの値を取得
&#47;&#47;-----------------------
var prev_ticket_id;
&#47;&#47; 前月の工数予測値
var prev_est_wbs_continue;
var prev_est_wbs_special;
var prev_est_sloc_continue;
var prev_est_sloc_special;

if (old_ticket_id != null) {
	prev_ticket_id = old_ticket_id;
	if (str2num(prev_ticket_id) != str2num(ticket_id)) {
		&#47;&#47; ticket_id が変わったら NULL をセット
		prev_est_wbs_continue  = null;
		prev_est_wbs_special   = null;
		prev_est_sloc_continue = null;
		prev_est_sloc_special  = null;
	} else {
		&#47;&#47; ticket_id が同じ場合は、前月の工数予測値 をセット
		prev_est_wbs_continue  = old_est_wbs_continue;
		prev_est_wbs_special   = old_est_wbs_special;
		prev_est_sloc_continue = old_est_sloc_continue;
		prev_est_sloc_special  = old_est_sloc_special;
	}
}

&#47;&#47;-------------------------
&#47;&#47; 工数予測値（グラフ表示データ）
&#47;&#47;-------------------------
&#47;&#47; 工数予測値（WBS進捗：継続）
var estimate_wbs_continue_graph  = calcEstimateCostGraph(in_estimate_wbs_continue,  prev_est_wbs_continue,  in_eac_wbs_continue);
&#47;&#47; 工数予測値（WBS進捗：特別）
var estimate_wbs_special_graph   = calcEstimateCostGraph(in_estimate_wbs_special,   prev_est_wbs_special,   in_eac_wbs_special);
&#47;&#47; 工数予測値（ソース規模：継続）
var estimate_sloc_continue_graph = calcEstimateCostGraph(in_estimate_sloc_continue, prev_est_sloc_continue, in_eac_sloc_continue);
&#47;&#47; 工数予測値（ソース規模：特別）
var estimate_sloc_special_graph  = calcEstimateCostGraph(in_estimate_sloc_special,  prev_est_sloc_special,  in_eac_sloc_special);

&#47;&#47;-----------------------
&#47;&#47; 次レコードに渡す
&#47;&#47;-----------------------
old_ticket_id = ticket_id;
old_est_wbs_continue  = in_estimate_wbs_continue;
old_est_wbs_special   = in_estimate_wbs_special;
old_est_sloc_continue = in_estimate_sloc_continue;
old_est_sloc_special  = in_estimate_sloc_special;


&#47;&#47; -------------------------------------------------
&#47;&#47; 工数予測値（グラフ表示データ） の算出を行う
&#47;&#47; 予測完了日より後の場合 NULL をセットする。
&#47;&#47;
&#47;&#47; estimated_cost       工数予測値
&#47;&#47; prev_estimated_cost  前月の工数予測値
&#47;&#47; eac                  完成時予測工数
&#47;&#47; -------------------------------------------------
function calcEstimateCostGraph(estimate_cost, prev_estimate_cost, eac) {
	var estimate_cost_graph = null;

	if (estimate_cost != null) {
		
		if (ceil(prev_estimate_cost) &gt;= ceil(eac)) {
			&#47;&#47; 前月の工数予測値 &gt;= 完成時予測工数
			estimate_cost_graph = null;
		} else {
			estimate_cost_graph = estimate_cost;
		}
	}
	return estimate_cost_graph;
}


</jsScript_script>
      </jsScript>    </jsScripts>    <fields>      <field>        <name>estimate_wbs_continue_graph</name>
        <rename>estimate_wbs_continue_graph</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>estimate_wbs_special_graph</name>
        <rename>estimate_wbs_special_graph</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>estimate_sloc_continue_graph</name>
        <rename>estimate_sloc_continue_graph</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>estimate_sloc_special_graph</name>
        <rename>estimate_sloc_special_graph</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>prev_est_wbs_continue</name>
        <rename>prev_est_wbs_continue_graph</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>prev_est_wbs_special</name>
        <rename>prev_est_wbs_special_graph</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>prev_est_sloc_continue</name>
        <rename>prev_est_sloc_continue_graph</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>prev_est_sloc_special</name>
        <rename>prev_est_sloc_special_graph</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1602</xloc>
      <yloc>2183</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>工数予測値算出</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <compatible>N</compatible>
    <jsScripts>      <jsScript>        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>&#47;&#47;Script here

var in_planned_month_value = planned_month_value;
var in_planned_cost        = planned_cost;
var in_planned_value       = planned_value_last;
var in_planned_value_graph = planned_value_graph;

var in_actual_cost          = actual_cost;
var in_actual_cost_graph    = actual_cost_graph;
var in_month_label_end_date = month_label_end_date;
var in_batch_date           = batch_date;
var in_wbs_end_date        = wbs_end_date;

var in_eac_wbs_continue  = eac_wbs_continue;
var in_eac_wbs_special   = eac_wbs_special;
var in_eac_sloc_continue = eac_sloc_continue;
var in_eac_sloc_special  = eac_sloc_special;

var in_spi_wbs  = spi_wbs;
var in_spi_sloc = spi_sloc;

var old_ticket_id;
var old_est_wbs_continue;
var old_est_wbs_special;
var old_est_sloc_continue;
var old_est_sloc_special;

&#47;&#47;-----------------------
&#47;&#47; 前レコードの値を取得
&#47;&#47;-----------------------
var prev_ticket_id;
&#47;&#47; 前月の工数予測値
var prev_est_wbs_continue;
var prev_est_wbs_special;
var prev_est_sloc_continue;
var prev_est_sloc_special;

if (old_ticket_id != null) {
	prev_ticket_id = old_ticket_id;
	if (str2num(prev_ticket_id) != str2num(ticket_id)) {
		&#47;&#47; ticket_id が変わったら NULL をセット
		prev_est_wbs_continue  = null;
		prev_est_wbs_special   = null;
		prev_est_sloc_continue = null;
		prev_est_sloc_special  = null;
	} else {
		&#47;&#47; ticket_id が同じ場合は、前月の工数予測値 をセット
		prev_est_wbs_continue  = old_est_wbs_continue;
		prev_est_wbs_special   = old_est_wbs_special;
		prev_est_sloc_continue = old_est_sloc_continue;
		prev_est_sloc_special  = old_est_sloc_special;
	}
}

&#47;&#47; 計画値変化分 
var planned_value_delta = calcPlannedValueDelta(in_planned_month_value, in_planned_cost, in_planned_value);

&#47;&#47;-----------------------
&#47;&#47; 工数予測値の増分
&#47;&#47;-----------------------
&#47;&#47; 工数予測値変化分（WBS進捗：継続）の増分
var est_wbs_continue_delta  = calcContinueEstCostDelta(in_actual_cost_graph, in_actual_cost, in_eac_wbs_continue,  planned_value_delta, in_spi_wbs);
&#47;&#47; 工数予測値変化分（WBS進捗：特別）の増分
var est_wbs_special_delta   = calcSpecialEstCostDelta (in_actual_cost_graph, in_actual_cost, in_eac_wbs_special,   planned_value_delta);
&#47;&#47; 工数予測値変化分（ソース規模：継続）の増分
var est_sloc_continue_delta = calcContinueEstCostDelta(in_actual_cost_graph, in_actual_cost, in_eac_sloc_continue, planned_value_delta, in_spi_sloc);
&#47;&#47; 工数予測値変化分（ソース規模：特別）の増分
var est_sloc_special_delta  = calcSpecialEstCostDelta (in_actual_cost_graph, in_actual_cost, in_eac_sloc_special,  planned_value_delta);

&#47;&#47;-----------------------
&#47;&#47; 工数予測値
&#47;&#47;-----------------------
&#47;&#47; 工数予測値 （WBS進捗：継続）
var estimate_wbs_continue  = calcEstimatedCost       (prev_est_wbs_continue,  est_wbs_continue_delta,  in_actual_cost, in_actual_cost_graph, in_month_label_end_date, in_batch_date, in_eac_wbs_continue);
&#47;&#47; 工数予測値（WBS進捗：特別）
var estimate_wbs_special   = calcEstimatedSpecialCost(prev_est_wbs_special,   est_wbs_special_delta,   in_actual_cost, in_actual_cost_graph, in_month_label_end_date, in_batch_date, in_eac_wbs_special,  in_planned_value_graph, in_wbs_end_date);
&#47;&#47; 工数予測値（ソース規模：継続）
var estimate_sloc_continue = calcEstimatedCost       (prev_est_sloc_continue, est_sloc_continue_delta, in_actual_cost, in_actual_cost_graph, in_month_label_end_date, in_batch_date, in_eac_sloc_continue);
&#47;&#47; 工数予測値（ソース規模：特別）
var estimate_sloc_special  = calcEstimatedSpecialCost(prev_est_sloc_special,  est_sloc_special_delta,  in_actual_cost, in_actual_cost_graph, in_month_label_end_date, in_batch_date, in_eac_sloc_special, in_planned_value_graph, in_wbs_end_date);

&#47;&#47; 残予測工数（WBS進捗：継続）
var remain_cost_wbs_continue  = in_eac_wbs_continue - estimate_wbs_continue;
&#47;&#47; 残予測工数（ソース規模：継続）
var remain_cost_sloc_continue = in_eac_sloc_continue - estimate_sloc_continue;

&#47;&#47;-----------------------
&#47;&#47; 次レコードに渡す
&#47;&#47;-----------------------
old_ticket_id = ticket_id;
old_est_wbs_continue  = estimate_wbs_continue;
old_est_wbs_special   = estimate_wbs_special;
old_est_sloc_continue = estimate_sloc_continue;
old_est_sloc_special  = estimate_sloc_special;

&#47;&#47; -------------------------------------------------
&#47;&#47; 計画値変化分 を算出する
&#47;&#47;
&#47;&#47; 計画値変化分 = 月ごとの工数計画値 ÷ 残り工数
&#47;&#47;         = 月ごとの工数計画値 ÷ (予定工数 - 最終実績月の工数計画値(PV))
&#47;&#47;
&#47;&#47; planned_month_value  月ごとの工数計画値
&#47;&#47; planned_cost        予定工数
&#47;&#47; planned_value_last  最終実績月の工数計画値(PV)
&#47;&#47; -------------------------------------------------
function calcPlannedValueDelta(planned_month_value, planned_cost, planned_value_last) {
	var planned_value_delta = null;
	if (planned_month_value != null &amp;&amp; planned_cost != null &amp;&amp; planned_value_last != null) {
		var remain_cost = planned_cost - planned_value_last;
		if (remain_cost != 0) {
			planned_value_delta = planned_month_value &#47; remain_cost;
		}
	}
	return planned_value_delta;
}

&#47;&#47; -------------------------------------------------
&#47;&#47; 工数予測値(継続)を算出する
&#47;&#47;
&#47;&#47; 工数予測値の差分 = (EAC - 工数実績値の累計) × 計画値変化分 × SPI(スケジュール効率)
&#47;&#47;
&#47;&#47; actual_cost_graph    工数計画値の累計（グラフ表示用）
&#47;&#47; actual_cost          工数計画値の累計
&#47;&#47; eac                  完成時予測工数(EAC)
&#47;&#47; planned_value_delta  計画値変化分
&#47;&#47; spi                  スケジュール効率
&#47;&#47; -------------------------------------------------
function calcContinueEstCostDelta(actual_cost_graph, actual_cost, eac, planned_value_delta, spi) {
	var est_continue_delta = null;
	if (actual_cost_graph == null) {
		&#47;&#47; 実績がない場合のみ算出
		if (actual_cost != null &amp;&amp; eac != null &amp;&amp; planned_value_delta != null) {
			est_continue_delta = (eac - actual_cost) * planned_value_delta * spi;
		}
	}
	return est_continue_delta;
}

&#47;&#47; -------------------------------------------------
&#47;&#47; 工数予測値(特別)の差分を算出する
&#47;&#47;
&#47;&#47; 工数予測値 の差分= (EAC - 工数実績値の累計) × 計画値変化分
&#47;&#47;
&#47;&#47; actual_cost_graph    工数計画値の累計（グラフ表示用）
&#47;&#47; actual_cost          工数計画値の累計
&#47;&#47; eac                  完成時予測工数(EAC)
&#47;&#47; planned_value_delta  計画値変化分
&#47;&#47; -------------------------------------------------
function calcSpecialEstCostDelta(actual_cost_graph, actual_cost, eac, planned_value_delta) {
	var est_special_delta = null;
	if (actual_cost_graph == null) {
		&#47;&#47; 実績がない場合のみ算出
		if (actual_cost != null &amp;&amp; eac != null &amp;&amp; planned_value_delta != null) {
			est_special_delta = (eac - actual_cost) * planned_value_delta;
		}
	}
	return est_special_delta;
}

&#47;&#47; -------------------------------------------------
&#47;&#47; 工数予測値 を算出する
&#47;&#47;
&#47;&#47; 工数予測値 = 前月の工数予測値 + 工数予測値の増分
&#47;&#47; 実績がある場合は NULL を設定する。ただし、最新の実績がある月のみ工数実績値を設定。
&#47;&#47; 
&#47;&#47; prev_est_cost        前月の工数予測値
&#47;&#47; est_cost_delta       工数予測値の増分
&#47;&#47; actual_cost          工数実績値
&#47;&#47; actual_cost_graph    工数実績値（グラフ表示用）
&#47;&#47; month_label_end_date 月ラベル終了日
&#47;&#47; batch_date           バッチ処理日
&#47;&#47; eac                  完成時予測工数
&#47;&#47; -------------------------------------------------
function calcEstimatedCost(prev_est_cost, est_cost_delta, actual_cost, actual_cost_graph, month_label_end_date, batch_date, eac) {
	var estimated_cost = null;
	if (actual_cost_graph != null) {
		&#47;&#47; 実績がある場合は NULL
		if (dateDiff(batch_date, month_label_end_date, &quot;d&quot;) &gt;= 0) {
			&#47;&#47; ただし、最新の実績がある月（=バッチ処理日の月）のみ工数実績値を設定
			estimated_cost = actual_cost_graph;
		} else {
			&#47;&#47; 実績がある場合は NULL
			estimated_cost = null;
		}
	} else {
		&#47;&#47; 実績がない場合
		estimated_cost = prev_est_cost + est_cost_delta;
		if (estimated_cost &gt; eac) {
			&#47;&#47; 完成時予測工数を超えている場合、完成時予測工数をセット
			estimated_cost = eac;
		}
	}
	return estimated_cost;
}

&#47;&#47; -------------------------------------------------
&#47;&#47; 工数予測値（特別） を算出する
&#47;&#47;
&#47;&#47; 工数予測値 = 前月の工数予測値 + 工数予測値の増分
&#47;&#47; 実績がある場合は NULL を設定する。ただし、最新の実績がある月のみ工数実績値を設定。
&#47;&#47; 
&#47;&#47; prev_est_cost        前月の工数予測値
&#47;&#47; est_cost_delta       工数予測値の増分
&#47;&#47; actual_cost          工数実績値
&#47;&#47; actual_cost_graph    工数実績値（グラフ表示用）
&#47;&#47; month_label_end_date 月ラベル終了日
&#47;&#47; batch_date           バッチ処理日
&#47;&#47; eac                  完成時予測工数
&#47;&#47; planned_value_graph  工数計画値（グラフ表示）
&#47;&#47; wbs_end_date         WBS終了予定日
&#47;&#47; -------------------------------------------------
function calcEstimatedSpecialCost(prev_est_cost, est_cost_delta, actual_cost, actual_cost_graph, month_label_end_date, batch_date, eac) {
	var estimated_cost = null;
	if (actual_cost_graph != null) {
		&#47;&#47; 実績がある場合は NULL
		if (dateDiff(batch_date, month_label_end_date, &quot;d&quot;) &gt;= 0) {
			&#47;&#47; ただし、最新の実績がある月（=バッチ処理日の月）のみ工数実績値を設定
			estimated_cost = actual_cost_graph;
		} else {
			&#47;&#47; 実績がある場合は NULL
			estimated_cost = null;
		}
	} else {
		&#47;&#47; 実績がない場合
		if (planned_value_graph == null) {
			&#47;&#47; 工数計画値がない場合
			estimated_cost = null;
		} else if (dateDiff(wbs_end_date, month_label_end_date, &quot;d&quot;) &gt;= 0) {
		    &#47;&#47; WBS終了予定日の週（WBS終了予定日 ≦ 月ラベル終了日）の場合
			estimated_cost = eac;
		} else {
    		estimated_cost = prev_est_cost + est_cost_delta;
    		if (estimated_cost &gt; eac) {
    			&#47;&#47; 完成時予測工数を超えている場合、完成時予測工数をセット
    			estimated_cost = eac;
    		}
    	}
	}
	return estimated_cost;
}
</jsScript_script>
      </jsScript>    </jsScripts>    <fields>      <field>        <name>planned_value_delta</name>
        <rename>planned_value_delta</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>prev_est_wbs_continue</name>
        <rename>prev_est_wbs_continue</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>prev_est_wbs_special</name>
        <rename>prev_est_wbs_special</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>prev_est_sloc_continue</name>
        <rename>prev_est_sloc_continue</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>prev_est_sloc_special</name>
        <rename>prev_est_sloc_special</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>est_wbs_continue_delta</name>
        <rename>est_wbs_continue_delta</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>est_wbs_special_delta</name>
        <rename>est_wbs_special_delta</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>est_sloc_continue_delta</name>
        <rename>est_sloc_continue_delta</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>est_sloc_special_delta</name>
        <rename>est_sloc_special_delta</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>estimate_wbs_continue</name>
        <rename>estimate_wbs_continue</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>estimate_wbs_special</name>
        <rename>estimate_wbs_special</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>estimate_sloc_continue</name>
        <rename>estimate_sloc_continue</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>estimate_sloc_special</name>
        <rename>estimate_sloc_special</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>remain_cost_wbs_continue</name>
        <rename>remain_cost_wbs_continue</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>remain_cost_sloc_continue</name>
        <rename>remain_cost_sloc_continue</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>772</xloc>
      <yloc>2169</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>工数単位変換</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <compatible>N</compatible>
    <jsScripts>      <jsScript>        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>&#47;&#47;Script here

&#47;&#47; １日当たりの作業時間(デフォルト：8時間)
var prop_hours_per_day = getVariable(&quot;HOURS_PER_DAY&quot;, &quot;8&quot;);
var workhour_per_day = str2num(prop_hours_per_day);

&#47;&#47; 工数計画値
var out_planned_value_graph = null;
if (planned_value_graph != null) {
	out_planned_value_graph = planned_value_graph &#47; workhour_per_day;
}

&#47;&#47; 工数実績値
var out_actual_cost_graph = null;
if (actual_cost_graph != null) {
	out_actual_cost_graph = actual_cost_graph &#47; workhour_per_day;
}

&#47;&#47; 生産価値（WBS進捗）
var out_earned_value_wbs_graph = null;
if (earned_value_wbs_graph != null) {
	out_earned_value_wbs_graph = earned_value_wbs_graph &#47; workhour_per_day;
}

&#47;&#47; 生産価値（ソース規模）
var out_earned_value_sloc_graph = null;
if (earned_value_sloc_graph != null) {
	out_earned_value_sloc_graph = earned_value_sloc_graph &#47; workhour_per_day;
}

&#47;&#47; 完成時予測工数（WBS進捗：継続）
var out_eac_wbs_continue_graph = null;
if (eac_wbs_continue_graph != null) {
	out_eac_wbs_continue_graph = eac_wbs_continue_graph &#47; workhour_per_day;
}

&#47;&#47; 完成時予測工数（WBS進捗：特別）
var out_eac_wbs_special_graph = null;
if (eac_wbs_special_graph != null) {
	out_eac_wbs_special_graph = eac_wbs_special_graph &#47; workhour_per_day;
}

&#47;&#47; 完成時予測工数（ソース規模：継続）
var out_eac_sloc_continue_graph = null;
if (eac_sloc_continue_graph != null) {
	out_eac_sloc_continue_graph = eac_sloc_continue_graph &#47; workhour_per_day;
}

&#47;&#47; 完成時予測工数（ソース規模：特別）
var out_eac_sloc_special_graph = null;
if (eac_sloc_special_graph != null) {
	out_eac_sloc_special_graph = eac_sloc_special_graph &#47; workhour_per_day;
}

&#47;&#47; 工数予測値（WBS進捗：継続）
var out_estimate_wbs_continue_graph = null;
if (estimate_wbs_continue_graph != null) {
	out_estimate_wbs_continue_graph = estimate_wbs_continue_graph &#47; workhour_per_day;
}

&#47;&#47; 工数予測値（WBS進捗：特別）
var out_estimate_wbs_special_graph = null;
if (estimate_wbs_special_graph != null) {
	out_estimate_wbs_special_graph = estimate_wbs_special_graph &#47; workhour_per_day;
}

&#47;&#47; 工数予測値（ソース規模：継続）
var out_estimate_sloc_continue_graph = null;
if (estimate_sloc_continue_graph != null) {
	out_estimate_sloc_continue_graph = estimate_sloc_continue_graph &#47; workhour_per_day;
}

&#47;&#47; 工数予測値（ソース規模：特別）
var out_estimate_sloc_special_graph = null;
if (estimate_sloc_special_graph != null) {
	out_estimate_sloc_special_graph = estimate_sloc_special_graph &#47; workhour_per_day;
}
</jsScript_script>
      </jsScript>    </jsScripts>    <fields>      <field>        <name>out_planned_value_graph</name>
        <rename>planned_value_graph</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>      <field>        <name>out_actual_cost_graph</name>
        <rename>actual_cost_graph</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>      <field>        <name>out_earned_value_wbs_graph</name>
        <rename>earned_value_wbs_graph</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>      <field>        <name>out_earned_value_sloc_graph</name>
        <rename>earned_value_sloc_graph</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>      <field>        <name>out_eac_wbs_continue_graph</name>
        <rename>eac_wbs_continue_graph</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>      <field>        <name>out_eac_wbs_special_graph</name>
        <rename>eac_wbs_special_graph</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>      <field>        <name>out_eac_sloc_continue_graph</name>
        <rename>eac_sloc_continue_graph</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>      <field>        <name>out_eac_sloc_special_graph</name>
        <rename>eac_sloc_special_graph</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>      <field>        <name>out_estimate_wbs_continue_graph</name>
        <rename>estimate_wbs_continue_graph</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>      <field>        <name>out_estimate_wbs_special_graph</name>
        <rename>estimate_wbs_special_graph</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>      <field>        <name>out_estimate_sloc_continue_graph</name>
        <rename>estimate_sloc_continue_graph</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>      <field>        <name>out_estimate_sloc_special_graph</name>
        <rename>estimate_sloc_special_graph</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>Y</replace>
      </field>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>2505</xloc>
      <yloc>2188</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>工数実績値算出</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <compatible>N</compatible>
    <jsScripts>      <jsScript>        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>&#47;&#47;Script here

var in_batch_date       = batch_date;
var in_month_label_date = month_label_date;
var in_planned_value    = planned_value;
var in_work_time        = work_time;

&#47;&#47;---------------------
&#47;&#47; 工数実績値 算出する
&#47;&#47;---------------------
&#47;&#47; 工数実績値（累計）
var actual_cost = calcActualCost(in_work_time, in_planned_value);
&#47;&#47; 工数実績値（累計） - グラフ表示用
var actual_cost_graph = calcActualCostGraph(actual_cost, in_month_label_date, in_batch_date);

&#47;&#47; -------------------------------------------------
&#47;&#47; 工数実績値 を算出する
&#47;&#47;
&#47;&#47; work_time     作業時間（累計）
&#47;&#47; planned_value 工数計画値
&#47;&#47; -------------------------------------------------
function calcActualCost(work_time_sum, planned_value) {
	var actual_cost = null;
	if (work_time_sum == null) {
		if (planned_value != null) {
				actual_cost = 0;
			}
	} else {
		actual_cost = work_time_sum;
	}
	return actual_cost;
}

&#47;&#47; -------------------------------------------------
&#47;&#47; 工数実績値（グラフ表示用） を算出する
&#47;&#47;
&#47;&#47; actual_cost     工数実績値
&#47;&#47; month_label_date 月ラベル
&#47;&#47; batch_date      バッチ処理日
&#47;&#47; -------------------------------------------------
function calcActualCostGraph(actual_cost, month_label_date, batch_date) {
	var actual_cost_graph = null;
	if (dateDiff(month_label_date, batch_date, &quot;d&quot;) &gt;= 0) {
		&#47;&#47; 月ラベル &lt;= バッチ処理日 の場合のみ値をセット
		actual_cost_graph = actual_cost;
	}
	return actual_cost_graph;
}

</jsScript_script>
      </jsScript>    </jsScripts>    <fields>      <field>        <name>actual_cost</name>
        <rename>actual_cost</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>actual_cost_graph</name>
        <rename>actual_cost_graph</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>2487</xloc>
      <yloc>1418</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>工数計画値算出</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <compatible>N</compatible>
    <jsScripts>      <jsScript>        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>&#47;&#47;Script here

var in_planned_cost        = planned_cost;
var in_wbs_start_date      = wbs_start_date;
var in_wbs_end_date        = wbs_end_date;
var in_month_label_date     = month_label_date;
var in_month_label_end_date = month_label_end_date;
var in_batch_date          = batch_date;

&#47;&#47;---------------------
&#47;&#47; 工数計画値 算出
&#47;&#47;---------------------
&#47;&#47; 計算終了日
var calc_end_date = minDate(in_wbs_end_date, in_month_label_end_date);
&#47;&#47; 工数計画値（累計）
var planned_value = calcPlannedValue(in_planned_cost, in_wbs_start_date, in_wbs_end_date, in_wbs_start_date, calc_end_date);

&#47;&#47;---------------------
&#47;&#47; 工数計画値（最終実績週）算出
&#47;&#47;---------------------
&#47;&#47; 計算終了日
var calc_end_date_last = minDate(in_wbs_end_date, in_batch_date);
&#47;&#47; 工数計画値（累計）
var planned_value_last = calcPlannedValue(in_planned_cost, in_wbs_start_date, in_wbs_end_date, in_wbs_start_date, calc_end_date_last);

&#47;&#47;---------------------
&#47;&#47; 工数計画値（週ごと） 算出
&#47;&#47;---------------------
&#47;&#47; 計算開始日
var calc_start_date = maxDate(wbs_start_date, month_label_date);
var planned_month_value = calcPlannedValue(planned_cost, wbs_start_date, wbs_end_date, calc_start_date, calc_end_date);

&#47;&#47; -------------------------------------------------
&#47;&#47; 工数計画値 を算出する
&#47;&#47;
&#47;&#47; planned_cost         予定工数
&#47;&#47; planned_start_date   開始予定日
&#47;&#47; planned_end_date     終了予定日
&#47;&#47; calc_start_date      計算開始日
&#47;&#47; calc_end_date        計算終了日
&#47;&#47; -------------------------------------------------
function calcPlannedValue(planned_cost, planned_start_date, planned_end_date, calc_start_date, calc_end_date) {
	var planned_value = null;
	if (planned_cost != null) {
		var calc_days  = dateDiff(calc_start_date, calc_end_date, &quot;d&quot;) + 1;
		if (calc_days &gt; 0) {
			var total_days = dateDiff(planned_start_date, planned_end_date, &quot;d&quot;) + 1;
			if (total_days != 0) {
				planned_value = planned_cost * (calc_days &#47; total_days);
			} else {
				planned_value = planned_cost;
			}
		} else {
				planned_value = 0;
		}
	}
	return planned_value;
}

&#47;&#47; -------------------------------------------------
&#47;&#47; 工数計画値（グラフ表示用）を算出する
&#47;&#47;
&#47;&#47; planned_valu         工数計画値
&#47;&#47; month_label_date      月ラベル
&#47;&#47; planned_end_date　　　　     終了予定日
&#47;&#47; -------------------------------------------------
function calcPlannedValueGraph (planned_value, month_label_date, planned_end_date) {
	var planned_value_graph = null;
	if (planned_value != null) {
		if (dateDiff(month_label_date, planned_end_date, &quot;d&quot;) &gt;= 0) {
			&#47;&#47; WBS期間内の場合
			planned_value_graph = planned_value;
		} else {
			&#47;&#47; WBS期間以降の場合
			planned_value_graph = null;
		}
	}
	return planned_value_graph;
}


function minDate(date_a, date_b) {
	var min_date = null;
	if (date_a != null &amp;&amp; date_b != null) {
		&#47;&#47; 日付A、日付B の両方が存在する場合
		if (dateDiff(date_a, date_b, &quot;d&quot;) &gt;= 0) {
			&#47;&#47; 日付A &lt;= 日付B
			min_date = date_a;
		} else {
			&#47;&#47; 日付A &gt; 日付B
			min_date = date_b;
		}

	} else if (date_a != null) {
		&#47;&#47; 日付Aのみ存在する場合
		min_date = date_a;

	} else if (date_b != null) {
		&#47;&#47; 日付Bのみ存在する場合
		min_date = date_b;
	}
	return min_date;
}

function maxDate(date_a, date_b) {
	var max_date = null;
	if (date_a != null &amp;&amp; date_b != null) {
		&#47;&#47; 日付A、日付B の両方が存在する場合
		if (dateDiff(date_a, date_b, &quot;d&quot;) &gt;= 0) {
			&#47;&#47; 日付A &lt;= 日付B
			max_date = date_b;
		} else {
			&#47;&#47; 日付A &gt; 日付B
			max_date = date_a;
		}

	} else if (date_a != null) {
		&#47;&#47; 日付Aのみ存在する場合
		max_date = date_a;

	} else if (date_b != null) {
		&#47;&#47; 日付Bのみ存在する場合
		max_date = date_b;
	}
	return max_date;
}
</jsScript_script>
      </jsScript>    </jsScripts>    <fields>      <field>        <name>planned_value</name>
        <rename>planned_value</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>planned_value_last</name>
        <rename>planned_value_last</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>planned_month_value</name>
        <rename>planned_month_value</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1185</xloc>
      <yloc>1067</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>工数計画値（グラフ表示）算出</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <compatible>N</compatible>
    <jsScripts>      <jsScript>        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>&#47;&#47;Script here

var in_planned_value   = planned_value;
var in_month_label_date = month_label_date;
var in_wbs_end_date    = wbs_end_date;

&#47;&#47;---------------------
&#47;&#47; 工数計画値（グラフ表示用） 算出
&#47;&#47;---------------------
&#47;&#47; 工数計画値（累計）（グラフ表示用）
var planned_value_graph = calcPlannedValueGraph(in_planned_value, in_month_label_date, in_wbs_end_date);

&#47;&#47; -------------------------------------------------
&#47;&#47; 工数計画値（グラフ表示用）を算出する
&#47;&#47;
&#47;&#47; planned_valu         工数計画値
&#47;&#47; month_label_date     月ラベル
&#47;&#47; planned_end_date　　　　     終了予定日
&#47;&#47; -------------------------------------------------
function calcPlannedValueGraph (planned_value, month_label_date, planned_end_date) {
	var planned_value_graph = null;
	if (planned_value != null) {
		if (dateDiff(month_label_date, planned_end_date, &quot;d&quot;) &gt;= 0) {
			&#47;&#47; WBS期間内の場合
			planned_value_graph = planned_value;
		} else {
			&#47;&#47; WBS期間以降の場合
			planned_value_graph = null;
		}
	}
	return planned_value_graph;
}</jsScript_script>
      </jsScript>    </jsScripts>    <fields>      <field>        <name>planned_value_graph</name>
        <rename>planned_value_graph</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>2484</xloc>
      <yloc>1158</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>必要レコード</name>
    <type>Dummy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>2234</xloc>
      <yloc>2182</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>日付型書式設定</name>
    <type>SelectValues</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>        <select_unspecified>N</select_unspecified>
      <meta>        <name>month_label_date</name>
        <rename>month_label_date</rename>
        <type>Date</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask>yyyy&#47;MM&#47;dd</conversion_mask>
        <date_format_lenient>false</date_format_lenient>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>      <meta>        <name>batch_date</name>
        <rename>batch_date</rename>
        <type>Date</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask>yyyy&#47;MM&#47;dd</conversion_mask>
        <date_format_lenient>false</date_format_lenient>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>      <meta>        <name>month_first_date</name>
        <rename>month_first_date</rename>
        <type>Date</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask>yyyy&#47;MM&#47;dd</conversion_mask>
        <date_format_lenient>false</date_format_lenient>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>      <meta>        <name>month_last_date</name>
        <rename>month_last_date</rename>
        <type>Date</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask>yyyy&#47;MM&#47;dd</conversion_mask>
        <date_format_lenient>false</date_format_lenient>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>      <meta>        <name>month_label_next_date</name>
        <rename>month_label_next_date</rename>
        <type>Date</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask>yyyy&#47;MM&#47;dd</conversion_mask>
        <date_format_lenient>false</date_format_lenient>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>      <meta>        <name>month_label_prev_date</name>
        <rename>month_label_prev_date</rename>
        <type>Date</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask>yyyy&#47;MM&#47;dd</conversion_mask>
        <date_format_lenient>false</date_format_lenient>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>      <meta>        <name>month_label_end_date</name>
        <rename>month_label_end_date</rename>
        <type>Date</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask>yyyy&#47;MM&#47;dd</conversion_mask>
        <date_format_lenient>false</date_format_lenient>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>      <meta>        <name>wbs_end_date</name>
        <rename>wbs_end_date</rename>
        <type>Date</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask>yyyy&#47;MM&#47;dd</conversion_mask>
        <date_format_lenient>false</date_format_lenient>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>      <meta>        <name>wbs_start_date</name>
        <rename>wbs_start_date</rename>
        <type>Date</type>
        <length>-2</length>
        <precision>-2</precision>
        <conversion_mask>yyyy&#47;MM&#47;dd</conversion_mask>
        <date_format_lenient>false</date_format_lenient>
        <encoding/>
        <decimal_symbol/>
        <grouping_symbol/>
        <currency_symbol/>
        <storage_type/>
      </meta>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>2475</xloc>
      <yloc>574</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>最下位</name>
    <type>Dummy</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1086</xloc>
      <yloc>834</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>最下位WBSチケット結合</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<join_type>INNER</join_type>
<step1>ソート 26</step1>
<step2>ソート 27</step2>
    <keys_1>
      <key>ticket_id_lowest</key>
    </keys_1>
    <keys_2>
      <key>ticket_id</key>
    </keys_2>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>724</xloc>
      <yloc>912</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>最下位チケット抽出</name>
    <type>FilterRows</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<send_true_to>最下位</send_true_to>
<send_false_to>最下位以外</send_false_to>
    <compare>
<condition>
 <negated>N</negated>
 <leftvalue>level</leftvalue>
 <function>=</function>
 <rightvalue/>
 <value><name>constant</name><type>Integer</type><text>0</text><length>-1</length><precision>0</precision><isnull>N</isnull><mask>#</mask></value> </condition>
    </compare>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1084</xloc>
      <yloc>756</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>最下位フラグ設定</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <compatible>N</compatible>
    <jsScripts>      <jsScript>        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>&#47;&#47;Script here

var in_level_max = str2num(level_max);

var terminal_flg = null;

if (in_level_max == 0) {
	&#47;&#47; 最下位のWBS
	terminal_flg = &quot;1&quot;;
} else {
	&#47;&#47; 最下位以外のWBS
	terminal_flg = &quot;0&quot;;
}
</jsScript_script>
      </jsScript>    </jsScripts>    <fields>      <field>        <name>terminal_flg</name>
        <rename>terminal_flg</rename>
        <type>String</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>2225</xloc>
      <yloc>1068</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>最下位以外</name>
    <type>Dummy</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1222</xloc>
      <yloc>758</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>最初日算出</name>
    <type>GroupBy</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <all_rows>N</all_rows>
      <ignore_aggregate>N</ignore_aggregate>
      <field_ignore/>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>grp</prefix>
      <add_linenr>N</add_linenr>
      <linenr_fieldname/>
      <give_back_row>N</give_back_row>
      <group>
      </group>
      <fields>
        <field>
          <aggregate>first_start_date</aggregate>
          <subject>start_date</subject>
          <type>MIN</type>
          <valuefield/>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1550</xloc>
      <yloc>334</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>最終日算出</name>
    <type>GroupBy</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <all_rows>N</all_rows>
      <ignore_aggregate>N</ignore_aggregate>
      <field_ignore/>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>grp</prefix>
      <add_linenr>N</add_linenr>
      <linenr_fieldname/>
      <give_back_row>N</give_back_row>
      <group>
      </group>
      <fields>
        <field>
          <aggregate>last_end_date</aggregate>
          <subject>end_date</subject>
          <type>MAX</type>
          <valuefield/>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1554</xloc>
      <yloc>423</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>月ラベルレコード数算出</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <compatible>N</compatible>
    <jsScripts>      <jsScript>        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>
&#47;&#47; var start_date = minDate(minDate(wbs_start_date, work_start_date), prog_start_date);
var start_date = first_start_date;

&#47;&#47;var end_date = batch_date;
&#47;&#47;var end_date = wbs_end_date;
var end_date = last_end_date;

var month_first_date = getMonthLabelDate(start_date, batch_date);
var month_last_date  = getMonthLabelDate(end_date,   batch_date);
var month_count      = calcMonthDiff(month_first_date, month_last_date);

function minDate(date_a, date_b) {
	var min_date = null;
	if (date_a != null &amp;&amp; date_b != null) {
		&#47;&#47; 日付A、日付B の両方が存在する場合
		if (dateDiff(date_a, date_b, &quot;d&quot;) &gt;= 0) {
			&#47;&#47; 日付A &lt;= 日付B
			min_date = date_a;
		} else {
			&#47;&#47; 日付A &gt; 日付B
			min_date = date_b;
		}

	} else if (date_a != null) {
		&#47;&#47; 日付Aのみ存在する場合
		min_date = date_a;

	} else if (date_b != null) {
		&#47;&#47; 日付Bのみ存在する場合
		min_date = date_b;
	}
	return min_date;
}

function maxDate(date_a, date_b) {
	var min_date = null;
	if (date_a != null &amp;&amp; date_b != null) {
		&#47;&#47; 日付A、日付B の両方が存在する場合
		if (dateDiff(date_a, date_b, &quot;d&quot;) &gt;= 0) {
			&#47;&#47; 日付A &lt;= 日付B
			min_date = date_b;
		} else {
			&#47;&#47; 日付A &gt; 日付B
			min_date = date_a;
		}

	} else if (date_a != null) {
		&#47;&#47; 日付Aのみ存在する場合
		min_date = date_a;

	} else if (date_b != null) {
		&#47;&#47; 日付Bのみ存在する場合
		min_date = date_b;
	}
	return min_date;
}

&#47;&#47; -------------------------------------------------
&#47;&#47; 月ラベルを算出する
&#47;&#47; バッチ処理日を基準にして、1か月ごとの日付を算出する。
&#47;&#47;
&#47;&#47; target_date   対象日
&#47;&#47; batch_date    バッチ日付
&#47;&#47; -------------------------------------------------
function getMonthLabelDate(target_date, batch_date) {
	var month_diff = calcMonthDiff(target_date, batch_date);
	var batch_next_date = dateAdd(batch_date, &quot;d&quot;, 1);
	var month_date_label = dateAdd(batch_next_date,&quot;m&quot;,(month_diff + 1) * -1);
	return month_date_label;
}


&#47;&#47; -------------------------------------------------
&#47;&#47; 月数を算出する
&#47;&#47;
&#47;&#47; start_date   開始日
&#47;&#47; end_date     終了日
&#47;&#47; -------------------------------------------------
function calcMonthDiff(start_date, end_date) {

	var end_next_date = dateAdd(end_date, &quot;d&quot;, 1);
	var month_diff = dateDiff(start_date, end_next_date, &quot;m&quot;);
	
	var start_day_num = getDayNumber(start_date, &quot;m&quot;);
	var end_day_num   = getDayNumber(end_next_date, &quot;m&quot;);
	if (start_day_num &gt;= end_day_num) {
		month_diff = month_diff - 1;
	}
	return month_diff;
}


</jsScript_script>
      </jsScript>    </jsScripts>    <fields>      <field>        <name>month_first_date</name>
        <rename>month_first_date</rename>
        <type>Date</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>month_last_date</name>
        <rename>month_last_date</rename>
        <type>Date</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>month_count</name>
        <rename>month_count</rename>
        <type>Integer</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>2015</xloc>
      <yloc>576</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>月ラベルレコード複製</name>
    <type>CloneRow</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <nrclones>0</nrclones>
    <addcloneflag>N</addcloneflag>
    <cloneflagfield/>
    <nrcloneinfield>Y</nrcloneinfield>
    <nrclonefield>month_count</nrclonefield>
    <addclonenum>Y</addclonenum>
    <clonenumfield>month_num</clonenumfield>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>2199</xloc>
      <yloc>577</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>月ラベル作成</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <compatible>N</compatible>
    <jsScripts>      <jsScript>        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>
var month_label_date      = dateAdd(month_first_date, &quot;m&quot;, month_num);
var month_label_next_date = dateAdd(month_first_date, &quot;m&quot;, (month_num + 1));
var month_label_prev_date = dateAdd(month_first_date, &quot;m&quot;, (month_num - 1));
var month_label_end_date  = dateAdd(month_label_next_date, &quot;d&quot;, -1);
</jsScript_script>
      </jsScript>      <jsScript>        <jsScript_type>-1</jsScript_type>
        <jsScript_name>dateAdd_Sample</jsScript_name>
        <jsScript_script>&#47;&#47; Add&apos;s the given number to  the given date Value.
&#47;&#47;
&#47;&#47; Usage:
&#47;&#47; dateAdd(var,var,var);
&#47;&#47; 1: Date - The Variable with the Date.
&#47;&#47; 2: String - The Type which represents the value
&#47;&#47; to add.
&#47;&#47; y - Years
&#47;&#47; m - Months
&#47;&#47; d - Days
&#47;&#47; w - Weeks
&#47;&#47; wd - Workingdays
&#47;&#47; hh - Hours
&#47;&#47; mi - Minutes
&#47;&#47; ss - Seconds
&#47;&#47; 3: Numeric - The Value to add.
&#47;&#47; 
&#47;&#47; 2006-11-15
&#47;&#47;
var d1 = new Date();
Alert(dateAdd(d1, &quot;y&quot;, 1));
Alert(dateAdd(d1, &quot;m&quot;, 4));
Alert(dateAdd(d1, &quot;d&quot;, 5));
Alert(dateAdd(d1, &quot;wd&quot;, 5));</jsScript_script>
      </jsScript>    </jsScripts>    <fields>      <field>        <name>month_label_date</name>
        <rename>month_label_date</rename>
        <type>Date</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>month_label_next_date</name>
        <rename>month_label_next_date</rename>
        <type>Date</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>month_label_prev_date</name>
        <rename>month_label_prev_date</rename>
        <type>Date</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>month_label_end_date</name>
        <rename>month_label_end_date</rename>
        <type>Date</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>2345</xloc>
      <yloc>576</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>月ラベル情報</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>batch_date</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>month_num</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>month_label_date</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>month_label_end_date</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>month_label_next_date</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>month_label_prev_date</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>ticket_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>planned_cost</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>planned_sloc</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>wbs_start_date</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>wbs_end_date</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>555</xloc>
      <yloc>1070</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>月ラベル情報 2</name>
    <type>SelectValues</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>month_num</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>month_label_date</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>month_label_next_date</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>ticket_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>640</xloc>
      <yloc>1332</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>月ラベル情報 3</name>
    <type>SelectValues</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>month_num</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>month_label_date</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>month_label_next_date</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>ticket_id</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>planned_cost</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>632</xloc>
      <yloc>1583</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>月ラベル結合 2</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<join_type>INNER</join_type>
<step1>ソート 19</step1>
<step2>月ラベル情報 3</step2>
    <keys_1>
      <key>ticket_id_prog</key>
    </keys_1>
    <keys_2>
      <key>ticket_id</key>
    </keys_2>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>733</xloc>
      <yloc>1473</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>月ラベル結合 4</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<join_type>INNER</join_type>
<step1>ソート 18</step1>
<step2>フィールド選択 5</step2>
    <keys_1>
      <key>ticket_id_sloc</key>
    </keys_1>
    <keys_2>
      <key>ticket_id</key>
    </keys_2>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>708</xloc>
      <yloc>1712</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>月ラベル結合 5</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<join_type>INNER</join_type>
<step1>ソート 20</step1>
<step2>月ラベル情報 2</step2>
    <keys_1>
      <key>ticket_id_work</key>
    </keys_1>
    <keys_2>
      <key>ticket_id</key>
    </keys_2>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>760</xloc>
      <yloc>1216</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>生産価値(WBS進捗)算出</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <compatible>N</compatible>
    <jsScripts>      <jsScript>        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>&#47;&#47;Script here

var in_planned_cost  = planned_cost;
var in_progress = progress;

&#47;&#47; 生産価値(WBS進捗)を算出する
var earned_value_wbs = calcEarnedValueWBS(in_planned_cost, in_progress);

&#47;&#47; -------------------------------------------------
&#47;&#47; 生産価値(WBS進捗)を算出する
&#47;&#47;
&#47;&#47; planned_cost   予定工数
&#47;&#47; progress       進捗率
&#47;&#47; planned_value  工数計画値
&#47;&#47; -------------------------------------------------
function calcEarnedValueWBS(planned_cost, progress) {
	var earned_value_wbs = null;

	if (planned_cost == null) {
		earned_value_wbs = 0;

	} else {
		if (progress == null) {
			progress = 0;
		}
		earned_value_wbs = planned_cost * (progress &#47; 100);

	}
	return earned_value_wbs;
}

</jsScript_script>
      </jsScript>    </jsScripts>    <fields>      <field>        <name>earned_value_wbs</name>
        <rename>earned_value_wbs</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1293</xloc>
      <yloc>1583</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>生産価値(ソース規模)算出</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <compatible>N</compatible>
    <jsScripts>      <jsScript>        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>&#47;&#47;Script here

var in_planned_cost = planned_cost;
var in_source_lines = source_lines2;
var in_planned_sloc = planned_sloc;
var in_progress     = progress;

&#47;&#47; 生産価値(ソース規模)を算出する
var earned_value_sloc = calcEarnedValueSLOC(in_planned_cost, in_source_lines, in_planned_sloc, in_progress);

&#47;&#47; -------------------------------------------------
&#47;&#47; 生産価値(ソース規模)を算出する
&#47;&#47;
&#47;&#47; planned_cost   予定工数
&#47;&#47; actual_sloc    ソース規模実績値
&#47;&#47; planned_sloc   ソース規模計画値
&#47;&#47; progress       WBS進捗率
&#47;&#47; -------------------------------------------------
function calcEarnedValueSLOC(planned_cost, actual_sloc, planned_sloc, progress) {
	var earned_value_sloc = null;

	if (planned_sloc == null || planned_sloc == 0) {
		&#47;&#47; ソース規模計画値がない場合 → 生産価値（WBS進捗）を使用する。
		earned_value_sloc = calcEarnedValueWBS(planned_cost, progress);

	} else if (planned_cost == null) {
		earned_value_sloc = 0;

	} else if (actual_sloc == null) {
		earned_value_sloc = 0;

	} else {
		if (actual_sloc == null) {
			actual_sloc = 0;
		}
		earned_value_sloc = planned_cost * (actual_sloc &#47; planned_sloc);
	}
	return earned_value_sloc;
}

&#47;&#47; -------------------------------------------------
&#47;&#47; 生産価値(WBS進捗)を算出する
&#47;&#47;
&#47;&#47; planned_cost   予定工数
&#47;&#47; progress       進捗率
&#47;&#47; planned_value  工数計画値
&#47;&#47; -------------------------------------------------
function calcEarnedValueWBS(planned_cost, progress) {
	var earned_value_wbs = null;

	if (planned_cost == null) {
		earned_value_wbs = 0;

	} else {
		if (progress == null) {
			progress = 0;
		}
		earned_value_wbs = planned_cost * (progress &#47; 100);

	}
	return earned_value_wbs;
}

</jsScript_script>
      </jsScript>    </jsScripts>    <fields>      <field>        <name>earned_value_sloc</name>
        <rename>earned_value_sloc</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1442</xloc>
      <yloc>1827</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>生産価値（WBS進捗）検索</name>
    <type>StreamLookup</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <from>集計 3</from>
    <input_sorted>N</input_sorted>
    <preserve_memory>N</preserve_memory>
    <sorted_list>N</sorted_list>
    <integer_pair>N</integer_pair>
    <lookup>
      <key>
        <name>month_num</name>
        <field>month_num</field>
      </key>
      <key>
        <name>ticket_id</name>
        <field>ticket_id</field>
      </key>
      <value>
        <name>earned_value_wbs</name>
        <rename>earned_value_wbs</rename>
        <default/>
        <type>-</type>
      </value>
    </lookup>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>2493</xloc>
      <yloc>1597</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>生産価値（グラフ表示用）算出</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <compatible>N</compatible>
    <jsScripts>      <jsScript>        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>&#47;&#47;Script here

var in_batch_date        = batch_date;
var in_month_label_date  = month_label_date;
var in_earned_value_wbs  = earned_value_wbs;
var in_earned_value_sloc = earned_value_sloc;

var earned_value_wbs_graph  = calcEarnedValueGraph(in_earned_value_wbs,  in_month_label_date, in_batch_date);
var earned_value_sloc_graph = calcEarnedValueGraph(in_earned_value_sloc, in_month_label_date, in_batch_date);

&#47;&#47; -------------------------------------------------
&#47;&#47; 生産価値（グラフ表示用） を算出する
&#47;&#47;
&#47;&#47; earned_value     工数実績値
&#47;&#47; month_label_date 月ラベル
&#47;&#47; batch_date       バッチ処理日
&#47;&#47; -------------------------------------------------
function calcEarnedValueGraph(earned_value, month_label_date, batch_date) {
	var earned_value_graph = null;
	if (dateDiff(month_label_date, batch_date, &quot;d&quot;) &gt;= 0) {
		&#47;&#47; 月ラベル &lt;= バッチ処理日 の場合のみ値をセット
		earned_value_graph = earned_value;
	}
	return earned_value_graph;
}
</jsScript_script>
      </jsScript>    </jsScripts>    <fields>      <field>        <name>earned_value_wbs_graph</name>
        <rename>earned_value_wbs_graph</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>earned_value_sloc_graph</name>
        <rename>earned_value_sloc_graph</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>2493</xloc>
      <yloc>1914</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>終了日列選択</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>batch_date</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>prog_end_date</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>wbs_end_date</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>work_end_date</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1202</xloc>
      <yloc>415</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>結合</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<join_type>LEFT OUTER</join_type>
<step1>WBS開始日・終了日取得</step1>
<step2>作業記録開始日・終了日取得</step2>
    <keys_1>
      <key>ticket_id_wbs</key>
    </keys_1>
    <keys_2>
      <key>ticket_id_work</key>
    </keys_2>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>728</xloc>
      <yloc>483</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>結合 2</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<join_type>LEFT OUTER</join_type>
<step1>不要列削除 3</step1>
<step2>進捗開始日・終了日取得</step2>
    <keys_1>
      <key>ticket_id_1</key>
    </keys_1>
    <keys_2>
      <key>ticket_id_prog</key>
    </keys_2>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1031</xloc>
      <yloc>576</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>結合 3</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<join_type>LEFT OUTER</join_type>
<step1>不要列削除 2</step1>
<step2>結合 5</step2>
    <keys_1>
    </keys_1>
    <keys_2>
    </keys_2>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1755</xloc>
      <yloc>581</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>結合 4</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<join_type>LEFT OUTER</join_type>
<step1>最下位フラグ設定</step1>
<step2>ソート 22</step2>
    <keys_1>
      <key>month_num</key>
      <key>ticket_id</key>
    </keys_1>
    <keys_2>
      <key>month_num</key>
      <key>ticket_id</key>
    </keys_2>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>2485</xloc>
      <yloc>1067</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>結合 5</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<join_type>INNER</join_type>
<step1>最初日算出</step1>
<step2>最終日算出</step2>
    <keys_1>
    </keys_1>
    <keys_2>
    </keys_2>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1690</xloc>
      <yloc>424</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>結合0</name>
    <type>JoinRows</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>out</prefix>
      <cache_size>500</cache_size>
      <main/>
    <compare>
<condition>
 <negated>N</negated>
 <leftvalue/>
 <function>=</function>
 <rightvalue/>
 </condition>
    </compare>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>267</xloc>
      <yloc>214</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>親チケットID_0変換</name>
    <type>IfNull</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <replaceAllByValue/>
      <replaceAllMask/>
      <selectFields>Y</selectFields>
      <selectValuesType>N</selectValuesType>
    <valuetypes>
      </valuetypes>
    <fields>
      <field>
        <name>parent_id</name>
        <value>0</value>
        <mask/>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>2362</xloc>
      <yloc>2187</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>進捗情報マージ</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<join_type>LEFT OUTER</join_type>
<step1>ソート 11</step1>
<step2>進捗情報（最新）</step2>
    <keys_1>
      <key>month_label_date</key>
      <key>ticket_id</key>
    </keys_1>
    <keys_2>
      <key>month_label_date</key>
      <key>ticket_id</key>
    </keys_2>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1130</xloc>
      <yloc>1582</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>進捗情報マージ 2</name>
    <type>MergeJoin</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
<join_type>LEFT OUTER</join_type>
<step1>ソース規模マージ</step1>
<step2>進捗情報（最新）</step2>
    <keys_1>
      <key>month_label_date</key>
      <key>ticket_id</key>
    </keys_1>
    <keys_2>
      <key>month_label_date</key>
      <key>ticket_id</key>
    </keys_2>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1272</xloc>
      <yloc>1830</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>進捗情報取得</name>
    <type>TableInput</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>IPF_DB</connection>
    <sql>SELECT
  ticket_id as ticket_id_prog
, thedate
, progress
FROM progress_info
WHERE project_id = ?
  AND thedate &lt; cast(? as date)</sql>
    <limit>0</limit>
    <lookup>SQLパラメータ 2</lookup>
    <execute_each_row>Y</execute_each_row>
    <variables_active>Y</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>530</xloc>
      <yloc>1470</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>進捗情報（最新）</name>
    <type>GroupBy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <all_rows>N</all_rows>
      <ignore_aggregate>N</ignore_aggregate>
      <field_ignore/>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>grp</prefix>
      <add_linenr>N</add_linenr>
      <linenr_fieldname/>
      <give_back_row>N</give_back_row>
      <group>
        <field>
          <name>month_label_date</name>
        </field>
        <field>
          <name>ticket_id</name>
        </field>
      </group>
      <fields>
        <field>
          <aggregate>progress</aggregate>
          <subject>progress</subject>
          <type>LAST_INCL_NULL</type>
          <valuefield/>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1010</xloc>
      <yloc>1474</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>進捗開始日・終了日取得</name>
    <type>TableInput</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <connection>IPF_DB</connection>
    <sql>SELECT
  ticket_id as ticket_id_prog
, min(thedate) as prog_start_date
, max(thedate) as prog_end_date
FROM progress_info
WHERE project_id = ?
  AND thedate &lt; cast(? as date)
GROUP BY ticket_id
ORDER BY ticket_id_prog ASC</sql>
    <limit>0</limit>
    <lookup>SQLパラメータ 7</lookup>
    <execute_each_row>Y</execute_each_row>
    <variables_active>Y</variables_active>
    <lazy_conversion_active>N</lazy_conversion_active>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>578</xloc>
      <yloc>575</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>開始日列選択</name>
    <type>SelectValues</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <fields>      <field>        <name>prog_start_date</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>wbs_start_date</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>      <field>        <name>work_start_date</name>
        <rename/>
        <length>-2</length>
        <precision>-2</precision>
      </field>        <select_unspecified>N</select_unspecified>
    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1206</xloc>
      <yloc>332</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>集計</name>
    <type>GroupBy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <all_rows>N</all_rows>
      <ignore_aggregate>N</ignore_aggregate>
      <field_ignore/>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>grp</prefix>
      <add_linenr>N</add_linenr>
      <linenr_fieldname/>
      <give_back_row>N</give_back_row>
      <group>
        <field>
          <name>month_num</name>
        </field>
        <field>
          <name>month_label_date</name>
        </field>
        <field>
          <name>ticket_id</name>
        </field>
      </group>
      <fields>
        <field>
          <aggregate>planned_cost</aggregate>
          <subject>planned_cost</subject>
          <type>SUM</type>
          <valuefield/>
        </field>
        <field>
          <aggregate>planned_sloc</aggregate>
          <subject>planned_sloc</subject>
          <type>SUM</type>
          <valuefield/>
        </field>
        <field>
          <aggregate>planned_value</aggregate>
          <subject>planned_value</subject>
          <type>SUM</type>
          <valuefield/>
        </field>
        <field>
          <aggregate>planned_value_last</aggregate>
          <subject>planned_value_last</subject>
          <type>SUM</type>
          <valuefield/>
        </field>
        <field>
          <aggregate>planned_month_value</aggregate>
          <subject>planned_month_value</subject>
          <type>SUM</type>
          <valuefield/>
        </field>
        <field>
          <aggregate>level_max</aggregate>
          <subject>level</subject>
          <type>MAX</type>
          <valuefield/>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>2112</xloc>
      <yloc>1069</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>集計 2</name>
    <type>GroupBy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <all_rows>N</all_rows>
      <ignore_aggregate>N</ignore_aggregate>
      <field_ignore/>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>grp</prefix>
      <add_linenr>N</add_linenr>
      <linenr_fieldname/>
      <give_back_row>N</give_back_row>
      <group>
        <field>
          <name>month_num</name>
        </field>
        <field>
          <name>month_label_date</name>
        </field>
        <field>
          <name>ticket_id</name>
        </field>
      </group>
      <fields>
        <field>
          <aggregate>work_time</aggregate>
          <subject>work_time</subject>
          <type>SUM</type>
          <valuefield/>
        </field>
        <field>
          <aggregate>work_end_date</aggregate>
          <subject>work_end_date</subject>
          <type>MAX</type>
          <valuefield/>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>2139</xloc>
      <yloc>1326</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>集計 3</name>
    <type>GroupBy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <all_rows>N</all_rows>
      <ignore_aggregate>N</ignore_aggregate>
      <field_ignore/>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>grp</prefix>
      <add_linenr>N</add_linenr>
      <linenr_fieldname/>
      <give_back_row>N</give_back_row>
      <group>
        <field>
          <name>month_num</name>
        </field>
        <field>
          <name>month_label_date</name>
        </field>
        <field>
          <name>ticket_id</name>
        </field>
      </group>
      <fields>
        <field>
          <aggregate>earned_value_wbs</aggregate>
          <subject>earned_value_wbs</subject>
          <type>SUM</type>
          <valuefield/>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>2122</xloc>
      <yloc>1594</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>集計 4</name>
    <type>GroupBy</type>
    <description/>
    <distribute>N</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
      <all_rows>N</all_rows>
      <ignore_aggregate>N</ignore_aggregate>
      <field_ignore/>
      <directory>%%java.io.tmpdir%%</directory>
      <prefix>grp</prefix>
      <add_linenr>N</add_linenr>
      <linenr_fieldname/>
      <give_back_row>N</give_back_row>
      <group>
        <field>
          <name>month_num</name>
        </field>
        <field>
          <name>month_label_date</name>
        </field>
        <field>
          <name>ticket_id</name>
        </field>
      </group>
      <fields>
        <field>
          <aggregate>earned_value_sloc</aggregate>
          <subject>earned_value_sloc</subject>
          <type>SUM</type>
          <valuefield/>
        </field>
      </fields>
     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>2111</xloc>
      <yloc>1832</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step>
    <name>スケジュール遅延工数算出（特別）</name>
    <type>ScriptValueMod</type>
    <description/>
    <distribute>Y</distribute>
    <copies>1</copies>
         <partitioning>
           <method>none</method>
           <schema_name/>
           </partitioning>
    <compatible>N</compatible>
    <jsScripts>      <jsScript>        <jsScript_type>0</jsScript_type>
        <jsScript_name>Script 1</jsScript_name>
        <jsScript_script>&#47;&#47;Script here

var in_prev_est_wbs_special = prev_est_wbs_special;
var in_estimate_wbs_special = estimate_wbs_special;
var in_eac_wbs_special_graph = eac_wbs_special_graph;

var in_prev_est_sloc_special = prev_est_sloc_special;
var in_estimate_sloc_special = estimate_sloc_special;
var in_eac_sloc_special_graph = eac_sloc_special_graph;

&#47;&#47; 工数予測値（WBS・特別）(スケジュール遅延分）
var estimate_wbs_special_delay = in_estimate_wbs_special;
if (in_prev_est_wbs_special != null &amp;&amp; in_estimate_wbs_special == null) {
	if (estimate_wbs_special_delay &lt; in_eac_wbs_special_graph) {
		&#47;&#47; 最後の週の工数予測値が、完成時予測工数に到達していない場合
		&#47;&#47; 工数予測値 = 完成時予測工数
		estimate_wbs_special_delay = in_eac_wbs_special_graph;
	}
}

&#47;&#47; 工数予測値（ソース規模・特別）(スケジュール遅延分）
var estimate_sloc_special_delay = in_estimate_sloc_special;
if (in_prev_est_sloc_special != null &amp;&amp; in_estimate_sloc_special == null) {
	if (estimate_sloc_special_delay &lt; in_eac_sloc_special_graph) {
		&#47;&#47; 最後の週の工数予測値が、完成時予測工数に到達していない場合
		&#47;&#47; 工数予測値 = 完成時予測工数
		estimate_sloc_special_delay = in_eac_sloc_special_graph;
	}
}

</jsScript_script>
      </jsScript>    </jsScripts>    <fields>      <field>        <name>estimate_wbs_special_delay</name>
        <rename>estimate_wbs_special_delay</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>      <field>        <name>estimate_sloc_special_delay</name>
        <rename>estimate_sloc_special_delay</rename>
        <type>Number</type>
        <length>-1</length>
        <precision>-1</precision>
        <replace>N</replace>
      </field>    </fields>     <cluster_schema/>
 <remotesteps>   <input>   </input>   <output>   </output> </remotesteps>    <GUI>
      <xloc>1223</xloc>
      <yloc>2175</yloc>
      <draw>Y</draw>
      </GUI>
    </step>

  <step_error_handling>
  </step_error_handling>
   <slave-step-copy-partition-distribution>
</slave-step-copy-partition-distribution>
   <slave_transformation>N</slave_transformation>
</transformation>
